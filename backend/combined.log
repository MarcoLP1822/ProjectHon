{"level":"info","message":"Generating categories for book: 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:28:08.929Z"}
{"bookId":"675af1d267c607f402f3ac0b","error":"TypeError: extractAndSaveText is not a function\n    at validateBookContent (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:32:29)\n    at exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:137:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"error","message":"Error generating categories: extractAndSaveText is not a function","timestamp":"2024-12-12T15:28:09.874Z"}
{"level":"info","message":"Generating categories for book: 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:30:35.921Z"}
{"level":"info","message":"Successfully generated categories for book 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:30:39.689Z"}
{"level":"info","message":"Generating keywords for book: 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:30:54.288Z"}
{"level":"info","message":"Successfully generated keywords for book 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:30:57.172Z"}
{"level":"info","message":"Generating scenes for book: 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:32:17.398Z"}
{"level":"info","message":"Successfully generated scenes for book 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:32:23.709Z"}
{"level":"info","message":"Generating cover images for book: 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:32:23.730Z"}
{"bookId":"675af1d267c607f402f3ac0b","level":"info","message":"Generating image for scene 1","sceneTitle":"L'Incontro Sospeso","timestamp":"2024-12-12T15:32:23.770Z"}
{"bookId":"675af1d267c607f402f3ac0b","level":"info","message":"Generating image for scene 2","sceneTitle":"Il Viaggio Inaspettato","timestamp":"2024-12-12T15:32:23.770Z"}
{"bookId":"675af1d267c607f402f3ac0b","level":"info","message":"Generating image for scene 3","sceneTitle":"L'Ultima Decisione","timestamp":"2024-12-12T15:32:23.770Z"}
{"level":"info","message":"Successfully generated cover images for book 675af1d267c607f402f3ac0b","timestamp":"2024-12-12T15:32:38.124Z"}
{"level":"info","message":"Generating categories for book: 675b0244a477b64b68c19eeb","timestamp":"2024-12-12T15:33:27.598Z"}
{"level":"info","message":"Successfully generated categories for book 675b0244a477b64b68c19eeb","timestamp":"2024-12-12T15:33:29.003Z"}
{"level":"info","message":"Generating keywords for book: 675b0244a477b64b68c19eeb","timestamp":"2024-12-12T15:33:32.116Z"}
{"level":"info","message":"Successfully generated keywords for book 675b0244a477b64b68c19eeb","timestamp":"2024-12-12T15:33:33.069Z"}
{"level":"info","message":"Generating categories for book: 675b0244a477b64b68c19eeb","timestamp":"2024-12-12T15:46:44.374Z"}
{"level":"info","message":"Successfully generated categories for book 675b0244a477b64b68c19eeb","timestamp":"2024-12-12T15:46:57.602Z"}
{"level":"info","message":"Generating keywords for book: 675b0244a477b64b68c19eeb","timestamp":"2024-12-12T15:47:16.367Z"}
{"level":"info","message":"Successfully generated keywords for book 675b0244a477b64b68c19eeb","timestamp":"2024-12-12T15:47:19.021Z"}
{"level":"info","message":"Generating categories for book: 675b059e1a253388caa09350","timestamp":"2024-12-12T15:47:53.717Z"}
{"level":"info","message":"Successfully generated categories for book 675b059e1a253388caa09350","timestamp":"2024-12-12T15:47:55.640Z"}
{"level":"info","message":"Generating keywords for book: 675b059e1a253388caa09350","timestamp":"2024-12-12T15:47:58.167Z"}
{"level":"info","message":"Successfully generated keywords for book 675b059e1a253388caa09350","timestamp":"2024-12-12T15:47:59.593Z"}
{"level":"info","message":"Generating categories for book: 675b059e1a253388caa09350","timestamp":"2024-12-12T15:50:33.273Z"}
{"level":"info","message":"Successfully generated categories for book 675b059e1a253388caa09350","timestamp":"2024-12-12T15:50:35.149Z"}
{"level":"info","message":"Generating keywords for book: 675b059e1a253388caa09350","timestamp":"2024-12-12T15:50:37.756Z"}
{"level":"info","message":"Successfully generated keywords for book 675b059e1a253388caa09350","timestamp":"2024-12-12T15:50:38.870Z"}
{"level":"info","message":"Generating categories for book: 675b059e1a253388caa09350","timestamp":"2024-12-12T15:53:46.596Z"}
{"level":"info","message":"Successfully generated categories for book 675b059e1a253388caa09350","timestamp":"2024-12-12T15:53:48.133Z"}
{"level":"info","message":"Generating categories for book: 675b059e1a253388caa09350","timestamp":"2024-12-12T15:53:50.373Z"}
{"level":"info","message":"Successfully generated categories for book 675b059e1a253388caa09350","timestamp":"2024-12-12T15:53:51.839Z"}
{"level":"info","message":"Generating categories for book: 675b059e1a253388caa09350","timestamp":"2024-12-12T15:56:41.400Z"}
{"level":"info","message":"Successfully generated categories for book 675b059e1a253388caa09350","timestamp":"2024-12-12T15:56:43.399Z"}
{"level":"info","message":"Generating keywords for book: 675b059e1a253388caa09350","timestamp":"2024-12-12T15:56:46.313Z"}
{"level":"info","message":"Successfully generated keywords for book 675b059e1a253388caa09350","timestamp":"2024-12-12T15:56:47.165Z"}
{"level":"info","message":"Generating categories for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T15:58:44.401Z"}
{"level":"info","message":"Successfully generated categories for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T15:58:46.626Z"}
{"level":"info","message":"Generating keywords for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T15:58:49.933Z"}
{"level":"info","message":"Successfully generated keywords for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T15:58:51.381Z"}
{"level":"info","message":"Generating scenes for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:04:42.911Z"}
{"level":"info","message":"Successfully generated scenes for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:04:49.221Z"}
{"level":"info","message":"Generating cover images for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:04:49.245Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 1","sceneTitle":"L'Arrivo alla Villa","timestamp":"2024-12-12T16:04:49.282Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 2","sceneTitle":"Lo Specchio Inquietante","timestamp":"2024-12-12T16:04:49.283Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 3","sceneTitle":"Il Ritual della Distruzione","timestamp":"2024-12-12T16:04:49.283Z"}
{"bookId":"675b0830f7a47311c7efb1bc","error":"Error: 400 This request has been blocked by our content filters.\n    at APIError.generate (/Users/marcolp/AI/CURSOR projects/Lose/backend/node_modules/openai/error.js:45:20)\n    at OpenAI.makeStatusError (/Users/marcolp/AI/CURSOR projects/Lose/backend/node_modules/openai/core.js:293:33)\n    at OpenAI.makeRequest (/Users/marcolp/AI/CURSOR projects/Lose/backend/node_modules/openai/core.js:337:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateCoverImage (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:366:22)\n    at async /Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:235:25\n    at async Promise.all (index 2)\n    at async exports.generateCoverImages (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:247:20)","level":"error","message":"Error generating cover images: 400 This request has been blocked by our content filters.","timestamp":"2024-12-12T16:05:00.284Z"}
{"level":"info","message":"Generating scenes for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:05:05.045Z"}
{"level":"info","message":"Successfully generated scenes for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:05:11.606Z"}
{"level":"info","message":"Generating cover images for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:05:11.610Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 1","sceneTitle":"LO_SPECCHIO_INQUIETANTE","timestamp":"2024-12-12T16:05:11.648Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 2","sceneTitle":"LA VILLA IN FIAMME","timestamp":"2024-12-12T16:05:11.648Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 3","sceneTitle":"L'OMBRA NEL RIFLESSO","timestamp":"2024-12-12T16:05:11.648Z"}
{"level":"info","message":"Successfully generated cover images for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:05:25.806Z"}
{"level":"info","message":"Generating scenes for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:13:41.163Z"}
{"level":"info","message":"Successfully generated scenes for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:13:50.958Z"}
{"level":"info","message":"Generating cover images for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:13:50.977Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 1","sceneTitle":"L'Arrivo alla Villa","timestamp":"2024-12-12T16:13:51.019Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 2","sceneTitle":"Il Misterioso Specchio","timestamp":"2024-12-12T16:13:51.020Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 3","sceneTitle":"Il Rituale Finale","timestamp":"2024-12-12T16:13:51.020Z"}
{"level":"info","message":"Successfully generated cover images for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:14:08.575Z"}
{"level":"info","message":"Generating scenes for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:14:43.127Z"}
{"level":"info","message":"Successfully generated scenes for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:14:51.528Z"}
{"level":"info","message":"Generating cover images for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:14:51.537Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 1","sceneTitle":"L'Arrivo alla Villa","timestamp":"2024-12-12T16:14:51.576Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 2","sceneTitle":"Il Rituale nel Salone","timestamp":"2024-12-12T16:14:51.577Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 3","sceneTitle":"Il Momento Finale","timestamp":"2024-12-12T16:14:51.577Z"}
{"level":"info","message":"Successfully generated cover images for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:15:12.450Z"}
{"level":"info","message":"Generating categories for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:15:22.676Z"}
{"level":"info","message":"Successfully generated categories for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:15:25.941Z"}
{"level":"info","message":"Generating categories for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:15:28.643Z"}
{"level":"info","message":"Successfully generated categories for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:15:32.121Z"}
{"level":"info","message":"Generating scenes for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:17:59.005Z"}
{"level":"info","message":"Successfully generated scenes for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:18:07.537Z"}
{"level":"info","message":"Generating cover images for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:18:07.555Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 1","sceneTitle":"L'Arrivo alla Villa","timestamp":"2024-12-12T16:18:07.597Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 2","sceneTitle":"Lo Specchio Inquietante","timestamp":"2024-12-12T16:18:07.597Z"}
{"bookId":"675b0830f7a47311c7efb1bc","level":"info","message":"Generating image for scene 3","sceneTitle":"Il Ritual di Distruzione","timestamp":"2024-12-12T16:18:07.597Z"}
{"level":"info","message":"Successfully generated cover images for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:18:22.582Z"}
{"level":"info","message":"Generating categories for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:33:43.468Z"}
{"level":"info","message":"Successfully generated categories for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:33:46.805Z"}
{"level":"info","message":"Generating categories for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:33:48.838Z"}
{"level":"info","message":"Successfully generated categories for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-12T16:33:51.914Z"}
{"level":"info","message":"Generating categories for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:13:20.488Z"}
{"level":"info","message":"Successfully generated categories for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:13:24.035Z"}
{"level":"info","message":"Generating keywords for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:20:17.983Z"}
{"bookId":"675b0830f7a47311c7efb1bc","error":"Error: Invalid keywords format received from OpenAI\n    at validateResponse (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:129:13)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:246:12\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:96:14)\n    at async exports.generateKeywords (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:131:22)","level":"error","message":"Error generating keywords: Invalid keywords format received from OpenAI","timestamp":"2024-12-13T13:20:26.074Z"}
{"level":"info","message":"Generating keywords for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:21:33.229Z"}
{"bookId":"675b0830f7a47311c7efb1bc","error":"Error: Invalid keywords format received from OpenAI\n    at validateResponse (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:129:13)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:246:12\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:96:14)\n    at async exports.generateKeywords (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:131:22)","level":"error","message":"Error generating keywords: Invalid keywords format received from OpenAI","timestamp":"2024-12-13T13:21:42.038Z"}
{"level":"info","message":"Generating keywords for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:21:53.229Z"}
{"bookId":"675b0830f7a47311c7efb1bc","error":"Error: Invalid keywords format received from OpenAI\n    at validateResponse (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:129:13)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:246:12\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:96:14)\n    at async exports.generateKeywords (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:131:22)","level":"error","message":"Error generating keywords: Invalid keywords format received from OpenAI","timestamp":"2024-12-13T13:22:01.969Z"}
{"level":"info","message":"Generating keywords for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:27:36.708Z"}
{"level":"info","message":"Successfully generated keywords for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:27:40.665Z"}
{"level":"info","message":"Generating keywords for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:30:15.834Z"}
{"level":"info","message":"Successfully generated keywords for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:30:19.313Z"}
{"level":"info","message":"Generating keywords for book: 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:33:09.618Z"}
{"level":"info","message":"Successfully generated keywords for book 675b0830f7a47311c7efb1bc","timestamp":"2024-12-13T13:33:12.888Z"}
{"level":"info","message":"Generating categories for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:19:47.668Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":72,"timestamp":"2024-12-13T23:19:51.815Z"}
{"level":"info","message":"Successfully generated categories for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:19:55.493Z"}
{"level":"info","message":"Generating keywords for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:20:12.957Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for keywords generation:","numChunks":72,"timestamp":"2024-12-13T23:20:17.086Z"}
{"level":"info","message":"Successfully generated keywords for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:20:21.920Z"}
{"level":"info","message":"Generating synopsis for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:20:24.555Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for synopsis generation:","numChunks":72,"timestamp":"2024-12-13T23:20:29.414Z"}
{"level":"info","message":"Successfully generated synopsis for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:20:37.134Z"}
{"level":"info","message":"Generating back cover for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:20:47.863Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for back cover generation:","numChunks":72,"timestamp":"2024-12-13T23:20:50.193Z"}
{"level":"info","message":"Generating back cover for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:20:54.589Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for back cover generation:","numChunks":72,"timestamp":"2024-12-13T23:20:57.152Z"}
{"level":"info","message":"Successfully generated back cover for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:20:57.825Z"}
{"level":"info","message":"Successfully generated back cover for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:21:02.104Z"}
{"level":"info","message":"Generating preface for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:21:06.274Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for preface generation:","numChunks":72,"timestamp":"2024-12-13T23:21:08.334Z"}
{"level":"info","message":"Successfully generated preface for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:21:18.869Z"}
{"level":"info","message":"Generating scenes for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:21:22.978Z"}
{"level":"info","message":"Successfully generated scenes for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:21:32.441Z"}
{"level":"info","message":"Generating cover images for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:21:32.552Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","level":"info","message":"Generating image for scene 1","sceneTitle":"Il Volo del Coraggio","timestamp":"2024-12-13T23:21:33.970Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","level":"info","message":"Generating image for scene 2","sceneTitle":"La Luce della Speranza","timestamp":"2024-12-13T23:21:33.971Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","level":"info","message":"Generating image for scene 3","sceneTitle":"La Battaglia Finale","timestamp":"2024-12-13T23:21:33.972Z"}
{"level":"info","message":"Successfully generated cover images for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:21:57.651Z"}
{"level":"info","message":"Generating categories for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:29:58.000Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","error":"ReferenceError: extractText is not defined\n    at extractAndSaveText (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:28:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async validateBookContent (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:102:21)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:82:25)","level":"error","message":"Error generating categories: extractText is not defined","timestamp":"2024-12-13T23:29:59.967Z"}
{"level":"info","message":"Generating categories for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:31:01.464Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":8,"timestamp":"2024-12-13T23:31:05.962Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","error":"ReferenceError: prepareChunksForProcessing is not defined\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:181:28\n    at withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:97:20)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:90:24)","level":"error","message":"Error generating categories: prepareChunksForProcessing is not defined","timestamp":"2024-12-13T23:31:08.966Z"}
{"level":"info","message":"Generating categories for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:32:02.468Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":8,"timestamp":"2024-12-13T23:32:07.351Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","error":"TypeError: chunks[0]?.text?.substring is not a function\n    at prepareChunksForProcessing (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/chunkingUtils.js:221:35)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:181:28\n    at withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:97:20)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:90:24)","level":"error","message":"Error generating categories: chunks[0]?.text?.substring is not a function","timestamp":"2024-12-13T23:32:10.355Z"}
{"level":"info","message":"Generating categories for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:32:45.834Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":8,"timestamp":"2024-12-13T23:32:54.426Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","error":"TypeError: chunks[0]?.text?.substring is not a function\n    at prepareChunksForProcessing (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/chunkingUtils.js:227:26)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:181:28\n    at withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:97:20)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:90:24)","level":"error","message":"Error generating categories: chunks[0]?.text?.substring is not a function","timestamp":"2024-12-13T23:32:57.427Z"}
{"level":"info","message":"Generating categories for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:33:36.874Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":8,"timestamp":"2024-12-13T23:33:42.354Z"}
{"level":"info","message":"Successfully generated categories for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:33:47.936Z"}
{"level":"info","message":"Generating keywords for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:34:34.397Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for keywords generation:","numChunks":8,"timestamp":"2024-12-13T23:34:39.269Z"}
{"level":"info","message":"Successfully generated keywords for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:34:44.872Z"}
{"level":"info","message":"Generating keywords for book: 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:37:01.570Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for keywords generation:","numChunks":4,"timestamp":"2024-12-13T23:37:05.561Z"}
{"level":"info","message":"Successfully generated keywords for book 675cc0f0c77c43d34af8b0d6","timestamp":"2024-12-13T23:37:14.815Z"}
{"level":"info","message":"Generating keywords for book: 675cc55409a5f4752be20abe","timestamp":"2024-12-13T23:38:06.170Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for keywords generation:","numChunks":14,"timestamp":"2024-12-13T23:38:11.887Z"}
{"level":"info","message":"Successfully generated keywords for book 675cc55409a5f4752be20abe","timestamp":"2024-12-13T23:38:22.208Z"}
{"level":"info","message":"Generating categories for book: 675cc55409a5f4752be20abe","timestamp":"2024-12-13T23:38:27.917Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":14,"timestamp":"2024-12-13T23:38:33.471Z"}
{"level":"info","message":"Successfully generated categories for book 675cc55409a5f4752be20abe","timestamp":"2024-12-13T23:38:40.071Z"}
{"level":"info","message":"Generating categories for book: 675cc55409a5f4752be20abe","timestamp":"2024-12-13T23:40:12.038Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":14,"timestamp":"2024-12-13T23:40:15.583Z"}
{"level":"info","message":"Successfully generated categories for book 675cc55409a5f4752be20abe","timestamp":"2024-12-13T23:40:24.636Z"}
{"level":"info","message":"Generating categories for book: 675cc55409a5f4752be20abe","timestamp":"2024-12-13T23:59:14.601Z"}
{"bookId":"675cc55409a5f4752be20abe","error":"Error: Failed to extract text from file: Cannot find module '/Users/marcolp/node_modules/pdfjs-dist/build/pdf.js' imported from /Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js\n    at extractText (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:261:15)\n    at async extractAndSaveText (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:87:31)\n    at async validateBookContent (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:169:21)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:82:25)","level":"error","message":"Error generating categories: Failed to extract text from file: Cannot find module '/Users/marcolp/node_modules/pdfjs-dist/build/pdf.js' imported from /Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js","timestamp":"2024-12-13T23:59:18.049Z"}
{"level":"info","message":"Generating categories for book: 675cc55409a5f4752be20abe","timestamp":"2024-12-14T00:09:54.379Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":14,"timestamp":"2024-12-14T00:09:59.814Z"}
{"level":"info","message":"Successfully generated categories for book 675cc55409a5f4752be20abe","timestamp":"2024-12-14T00:10:05.682Z"}
{"level":"info","message":"Generating categories for book: 675ccd5b4865115ad7cb09cd","timestamp":"2024-12-14T00:12:25.418Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":11,"timestamp":"2024-12-14T00:12:28.597Z"}
{"level":"info","message":"Successfully generated categories for book 675ccd5b4865115ad7cb09cd","timestamp":"2024-12-14T00:12:34.192Z"}
{"level":"info","message":"Generating categories for book: 675cc55409a5f4752be20abe","timestamp":"2024-12-14T00:25:43.839Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":13,"timestamp":"2024-12-14T00:25:51.710Z"}
{"level":"info","message":"Successfully generated categories for book 675cc55409a5f4752be20abe","timestamp":"2024-12-14T00:26:00.847Z"}
{"level":"info","message":"Generating categories for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T08:19:19.004Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":8,"timestamp":"2024-12-14T08:19:34.971Z"}
{"level":"info","message":"Successfully generated categories for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T08:19:45.951Z"}
{"level":"info","message":"Generating categories for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T08:20:47.252Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":8,"timestamp":"2024-12-14T08:20:54.167Z"}
{"level":"info","message":"Successfully generated categories for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T08:20:58.987Z"}
{"level":"info","message":"Generating categories for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T09:01:45.187Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":8,"timestamp":"2024-12-14T09:01:49.679Z"}
{"level":"info","message":"Successfully generated categories for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T09:02:04.423Z"}
{"level":"info","message":"Generating keywords for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:24:37.064Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for keywords generation:","numChunks":8,"timestamp":"2024-12-14T10:24:42.658Z"}
{"level":"info","message":"Successfully generated keywords for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:24:56.955Z"}
{"level":"info","message":"Generating categories for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:49:37.675Z"}
{"hasChunks":true,"hasStructure":true,"level":"info","message":"Book content prepared for processing:","numChunks":8,"timestamp":"2024-12-14T10:49:43.916Z"}
{"level":"info","message":"Successfully generated categories for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:50:09.197Z"}
{"level":"info","message":"Generating keywords for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:50:42.174Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for keywords generation:","numChunks":8,"timestamp":"2024-12-14T10:50:45.970Z"}
{"level":"info","message":"Successfully generated keywords for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:51:19.237Z"}
{"level":"info","message":"Generating synopsis for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:51:23.718Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for synopsis generation:","numChunks":8,"timestamp":"2024-12-14T10:51:28.036Z"}
{"level":"info","message":"Successfully generated synopsis for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:51:46.553Z"}
{"level":"info","message":"Generating back cover for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:52:14.478Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for back cover generation:","numChunks":8,"timestamp":"2024-12-14T10:52:17.682Z"}
{"level":"info","message":"Successfully generated back cover for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:52:25.617Z"}
{"level":"info","message":"Generating preface for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:52:36.226Z"}
{"hasChunks":true,"level":"info","message":"Book content prepared for preface generation:","numChunks":8,"timestamp":"2024-12-14T10:52:39.203Z"}
{"level":"info","message":"Successfully generated preface for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:52:51.166Z"}
{"level":"info","message":"Generating scenes for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:52:58.609Z"}
{"level":"info","message":"Successfully generated scenes for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:53:15.997Z"}
{"level":"info","message":"Generating cover images for book: 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:53:16.019Z"}
{"bookId":"675d3d81d11463f370132c6c","level":"info","message":"Generating image for scene 1","sceneTitle":"LA RIFLESSIONE INTERIORE","timestamp":"2024-12-14T10:53:16.332Z"}
{"bookId":"675d3d81d11463f370132c6c","level":"info","message":"Generating image for scene 2","sceneTitle":"IL CAMBIAMENTO NEL MONDO DEL LAVORO","timestamp":"2024-12-14T10:53:16.332Z"}
{"bookId":"675d3d81d11463f370132c6c","level":"info","message":"Generating image for scene 3","sceneTitle":"L'IMPORTANZA DELLA COMUNICAZIONE","timestamp":"2024-12-14T10:53:16.332Z"}
{"level":"info","message":"Successfully generated cover images for book 675d3d81d11463f370132c6c","timestamp":"2024-12-14T10:54:08.971Z"}
