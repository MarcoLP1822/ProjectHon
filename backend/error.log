{"bookId":"675af1d267c607f402f3ac0b","error":"TypeError: extractAndSaveText is not a function\n    at validateBookContent (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:32:29)\n    at exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:137:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"error","message":"Error generating categories: extractAndSaveText is not a function","timestamp":"2024-12-12T15:28:09.874Z"}
{"bookId":"675b0830f7a47311c7efb1bc","error":"Error: 400 This request has been blocked by our content filters.\n    at APIError.generate (/Users/marcolp/AI/CURSOR projects/Lose/backend/node_modules/openai/error.js:45:20)\n    at OpenAI.makeStatusError (/Users/marcolp/AI/CURSOR projects/Lose/backend/node_modules/openai/core.js:293:33)\n    at OpenAI.makeRequest (/Users/marcolp/AI/CURSOR projects/Lose/backend/node_modules/openai/core.js:337:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async generateCoverImage (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:366:22)\n    at async /Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:235:25\n    at async Promise.all (index 2)\n    at async exports.generateCoverImages (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:247:20)","level":"error","message":"Error generating cover images: 400 This request has been blocked by our content filters.","timestamp":"2024-12-12T16:05:00.284Z"}
{"bookId":"675b0830f7a47311c7efb1bc","error":"Error: Invalid keywords format received from OpenAI\n    at validateResponse (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:129:13)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:246:12\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:96:14)\n    at async exports.generateKeywords (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:131:22)","level":"error","message":"Error generating keywords: Invalid keywords format received from OpenAI","timestamp":"2024-12-13T13:20:26.074Z"}
{"bookId":"675b0830f7a47311c7efb1bc","error":"Error: Invalid keywords format received from OpenAI\n    at validateResponse (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:129:13)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:246:12\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:96:14)\n    at async exports.generateKeywords (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:131:22)","level":"error","message":"Error generating keywords: Invalid keywords format received from OpenAI","timestamp":"2024-12-13T13:21:42.038Z"}
{"bookId":"675b0830f7a47311c7efb1bc","error":"Error: Invalid keywords format received from OpenAI\n    at validateResponse (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:129:13)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:246:12\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:96:14)\n    at async exports.generateKeywords (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:131:22)","level":"error","message":"Error generating keywords: Invalid keywords format received from OpenAI","timestamp":"2024-12-13T13:22:01.969Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","error":"ReferenceError: extractText is not defined\n    at extractAndSaveText (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:28:31)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async validateBookContent (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:102:21)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:82:25)","level":"error","message":"Error generating categories: extractText is not defined","timestamp":"2024-12-13T23:29:59.967Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","error":"ReferenceError: prepareChunksForProcessing is not defined\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:181:28\n    at withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:97:20)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:90:24)","level":"error","message":"Error generating categories: prepareChunksForProcessing is not defined","timestamp":"2024-12-13T23:31:08.966Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","error":"TypeError: chunks[0]?.text?.substring is not a function\n    at prepareChunksForProcessing (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/chunkingUtils.js:221:35)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:181:28\n    at withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:97:20)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:90:24)","level":"error","message":"Error generating categories: chunks[0]?.text?.substring is not a function","timestamp":"2024-12-13T23:32:10.355Z"}
{"bookId":"675cc0f0c77c43d34af8b0d6","error":"TypeError: chunks[0]?.text?.substring is not a function\n    at prepareChunksForProcessing (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/chunkingUtils.js:227:26)\n    at /Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:181:28\n    at withRetry (/Users/marcolp/AI/CURSOR projects/Lose/backend/services/openai.js:97:20)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:90:24)","level":"error","message":"Error generating categories: chunks[0]?.text?.substring is not a function","timestamp":"2024-12-13T23:32:57.427Z"}
{"bookId":"675cc55409a5f4752be20abe","error":"Error: Failed to extract text from file: Cannot find module '/Users/marcolp/node_modules/pdfjs-dist/build/pdf.js' imported from /Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js\n    at extractText (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:261:15)\n    at async extractAndSaveText (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:87:31)\n    at async validateBookContent (/Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js:169:21)\n    at async exports.generateCategories (/Users/marcolp/AI/CURSOR projects/Lose/backend/controllers/ai.controller.js:82:25)","level":"error","message":"Error generating categories: Failed to extract text from file: Cannot find module '/Users/marcolp/node_modules/pdfjs-dist/build/pdf.js' imported from /Users/marcolp/AI/CURSOR projects/Lose/backend/utils/bookUtils.js","timestamp":"2024-12-13T23:59:18.049Z"}
