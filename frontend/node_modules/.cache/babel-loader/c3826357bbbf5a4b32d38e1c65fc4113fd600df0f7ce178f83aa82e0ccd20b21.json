{"ast":null,"code":"var _jsxFileName = \"/Users/marcolp/AI/CURSOR projects/Lose/frontend/src/components/dashboard/TaskDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { Box, Typography, Button, Container, Paper, Grid, IconButton, Collapse, CircularProgress, Alert, Snackbar } from '@mui/material';\nimport MetadataIcon from '@mui/icons-material/Description';\nimport CoverIcon from '@mui/icons-material/Image';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport CategoryIcon from '@mui/icons-material/Category';\nimport KeyIcon from '@mui/icons-material/Key';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport ImageIcon from '@mui/icons-material/Image';\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\nimport ArticleIcon from '@mui/icons-material/Article';\nimport { useBooks } from '../../context/BookContext';\nimport { alpha } from '@mui/material/styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TaskDashboard = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    books,\n    setBooks,\n    isGenerating,\n    generateCategories,\n    generateKeywords,\n    regenerateCategory,\n    regenerateKeyword,\n    generateScenes,\n    generateCoverImages\n  } = useBooks();\n  const [currentBook, setCurrentBook] = useState(null);\n  const [expandedCard, setExpandedCard] = useState(null);\n  const [showCategories, setShowCategories] = useState(false);\n  const [showKeywords, setShowKeywords] = useState(false);\n  const [showCovers, setShowCovers] = useState(false);\n  const [categories, setCategories] = useState(null);\n  const [keywords, setKeywords] = useState(null);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [generatingStates, setGeneratingStates] = useState({\n    main: false,\n    secondary1: false,\n    secondary2: false\n  });\n  const [isGeneratingAll, setIsGeneratingAll] = useState(false);\n  const [isGeneratingKeywords, setIsGeneratingKeywords] = useState(false);\n  const [isGeneratingCovers, setIsGeneratingCovers] = useState(false);\n  const [keywordGeneratingStates, setKeywordGeneratingStates] = useState({\n    main: false,\n    secondary1: false,\n    secondary2: false,\n    secondary3: false\n  });\n  useEffect(() => {\n    var _location$state;\n    const bookName = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.bookName;\n    if (bookName) {\n      const book = books.find(b => b.title === bookName);\n      if (book) {\n        var _book$metadata, _book$metadata$covers, _book$metadata$covers2;\n        setCurrentBook(book);\n        const savedShowCovers = localStorage.getItem(`showCovers_${book.id}`);\n        if (savedShowCovers === 'true' && ((_book$metadata = book.metadata) === null || _book$metadata === void 0 ? void 0 : (_book$metadata$covers = _book$metadata.covers) === null || _book$metadata$covers === void 0 ? void 0 : (_book$metadata$covers2 = _book$metadata$covers.scenes) === null || _book$metadata$covers2 === void 0 ? void 0 : _book$metadata$covers2.length) > 0) {\n          setShowCovers(true);\n        }\n        if (book.metadata) {\n          if (book.metadata.categories) {\n            setCategories(book.metadata.categories);\n          }\n          if (book.metadata.keywords && book.metadata.keywords.length > 0) {\n            setKeywords({\n              keywords: book.metadata.keywords\n            });\n          }\n        } else {\n          setCategories(null);\n          setKeywords(null);\n          setShowCategories(false);\n          setShowKeywords(false);\n        }\n      } else {\n        navigate('/');\n      }\n    }\n  }, [location.state, books, navigate]);\n  const handleExpand = cardId => {\n    setExpandedCard(expandedCard === cardId ? null : cardId);\n  };\n  const handleGenerateCategories = async () => {\n    try {\n      setError(null);\n      setIsGeneratingAll(true);\n      setShowCategories(true);\n      const result = await generateCategories(currentBook.id);\n      setCategories(result);\n      setSuccess('Categorie generate con successo');\n    } catch (error) {\n      console.error('Error:', error);\n      setError('Errore nella generazione delle categorie. Riprova.');\n    } finally {\n      setIsGeneratingAll(false);\n    }\n  };\n  const handleGenerateKeywords = async () => {\n    try {\n      setError(null);\n      setIsGeneratingKeywords(true);\n      setShowKeywords(true);\n      const result = await generateKeywords(currentBook.id);\n      setKeywords(result);\n      setSuccess('Keywords generate con successo');\n    } catch (error) {\n      console.error('Error:', error);\n      setError('Errore nella generazione delle keywords. Riprova.');\n    } finally {\n      setIsGeneratingKeywords(false);\n    }\n  };\n  const handleRegenerateCategory = async type => {\n    try {\n      setError(null);\n      setGeneratingStates(prev => ({\n        ...prev,\n        [type]: true\n      }));\n      if (!categories || !categories.mainCategory || !categories.secondaryCategories) {\n        throw new Error('No categories available. Generate categories first.');\n      }\n      const currentCategories = {\n        mainCategory: categories.mainCategory,\n        secondaryCategories: categories.secondaryCategories || []\n      };\n      const result = await regenerateCategory(currentBook.id, type, currentCategories);\n      if (type === 'main') {\n        setCategories(prev => ({\n          ...prev,\n          mainCategory: result.category\n        }));\n      } else {\n        const index = type === 'secondary1' ? 0 : 1;\n        setCategories(prev => ({\n          ...prev,\n          secondaryCategories: prev.secondaryCategories.map((cat, idx) => idx === index ? result.category : cat)\n        }));\n      }\n      setSuccess(`Categoria ${type === 'main' ? 'principale' : 'secondaria'} rigenerata con successo`);\n    } catch (error) {\n      console.error('Error:', error);\n      setError(error.message || `Errore nella rigenerazione della categoria ${type === 'main' ? 'principale' : 'secondaria'}. Riprova.`);\n    } finally {\n      setGeneratingStates(prev => ({\n        ...prev,\n        [type]: false\n      }));\n    }\n  };\n  const handleRegenerateKeyword = async index => {\n    try {\n      setError(null);\n      setKeywordGeneratingStates(prev => ({\n        ...prev,\n        [`keyword${index}`]: true\n      }));\n      if (!keywords || !keywords.keywords) {\n        throw new Error('No keywords available. Generate keywords first.');\n      }\n      const result = await regenerateKeyword(currentBook.id, index, keywords);\n      setKeywords(prev => ({\n        ...prev,\n        keywords: prev.keywords.map((kw, idx) => idx === index ? result.keyword : kw)\n      }));\n      setSuccess('Keyword rigenerata con successo');\n    } catch (error) {\n      console.error('Error:', error);\n      setError(error.message || 'Errore nella rigenerazione della keyword. Riprova.');\n    } finally {\n      setKeywordGeneratingStates(prev => ({\n        ...prev,\n        [`keyword${index}`]: false\n      }));\n    }\n  };\n  const retryOperation = async (operation, maxRetries = 3) => {\n    for (let i = 0; i < maxRetries; i++) {\n      try {\n        return await operation();\n      } catch (error) {\n        if (i === maxRetries - 1) throw error;\n        await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));\n      }\n    }\n  };\n  const handleGenerateCovers = async () => {\n    try {\n      console.log('Starting cover generation process...');\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingCovers(true);\n\n      // Utilizziamo il retry per generateScenes\n      const scenesResult = await retryOperation(async () => {\n        console.log('Calling generateScenes with bookId:', currentBook.id);\n        return await generateScenes(currentBook.id);\n      });\n\n      // Aggiungiamo un piccolo delay dopo generateScenes\n      await new Promise(resolve => setTimeout(resolve, 100));\n      if (!scenesResult || !scenesResult.scenes) {\n        console.error('Invalid scenes result:', scenesResult);\n        throw new Error('Failed to generate scenes');\n      }\n\n      // Aggiungiamo un altro piccolo delay prima di generateCoverImages\n      await new Promise(resolve => setTimeout(resolve, 100));\n\n      // Utilizziamo il retry per generateCoverImages\n      const coversResult = await retryOperation(async () => {\n        console.log('Generating cover images for scenes...');\n        return await generateCoverImages(currentBook.id, scenesResult.scenes);\n      });\n\n      // Aggiungiamo un ultimo delay prima di aggiornare lo stato\n      await new Promise(resolve => setTimeout(resolve, 100));\n\n      // Aggiorniamo il libro con scene e copertine\n      const updatedBook = {\n        ...currentBook\n      };\n      updatedBook.metadata = {\n        ...updatedBook.metadata,\n        covers: {\n          scenes: scenesResult.scenes.map((scene, index) => ({\n            ...scene,\n            imageUrl: coversResult.covers[index].imageUrl\n          })),\n          selectedScene: null\n        }\n      };\n      console.log('Finding book index...');\n      const bookIndex = books.findIndex(b => b.id === currentBook.id);\n      if (bookIndex !== -1) {\n        console.log('Updating books array...');\n        const newBooks = [...books];\n        newBooks[bookIndex] = updatedBook;\n        setBooks(newBooks);\n        setCurrentBook(updatedBook);\n      }\n      setShowCovers(true);\n      localStorage.setItem(`showCovers_${currentBook.id}`, 'true');\n      setSuccess('Copertine generate con successo');\n    } catch (error) {\n      console.error('Error in handleGenerateCovers:', error);\n      setError('Errore nella generazione delle copertine. Riprova.');\n      setShowCovers(false);\n      localStorage.removeItem(`showCovers_${currentBook.id}`);\n    } finally {\n      setIsGeneratingCovers(false);\n    }\n  };\n  const handleCloseSnackbar = () => {\n    setError(null);\n    setSuccess(null);\n  };\n  if (!currentBook) return null;\n  const generateButtonStyle = {\n    minWidth: '200px',\n    maxWidth: '300px',\n    height: '48px',\n    borderRadius: '8px',\n    textTransform: 'uppercase',\n    fontSize: '1rem',\n    fontWeight: 500,\n    boxShadow: '0 4px 12px rgba(75, 107, 251, 0.2)',\n    '&:hover': {\n      boxShadow: '0 6px 16px rgba(75, 107, 251, 0.3)',\n      backgroundColor: 'primary.dark'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      backgroundColor: '#F8F9FA',\n      minHeight: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        py: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mb: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => navigate('/'),\n          sx: {\n            mr: 2,\n            color: 'text.secondary',\n            '&:hover': {\n              backgroundColor: 'rgba(0, 0, 0, 0.04)'\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"text.secondary\",\n            sx: {\n              mb: 1\n            },\n            children: currentBook.date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h1\",\n            sx: {\n              fontWeight: 500,\n              color: 'text.primary'\n            },\n            children: currentBook.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              p: 3,\n              '&:hover': {\n                boxShadow: '0px 8px 24px rgba(0, 0, 0, 0.08)'\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'flex-start'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  mr: 3,\n                  backgroundColor: '#F8F9FF',\n                  borderRadius: '12px',\n                  p: 2\n                },\n                children: /*#__PURE__*/_jsxDEV(MetadataIcon, {\n                  sx: {\n                    fontSize: 48,\n                    color: 'primary.main'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  flexGrow: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Crea e ottimizza i metadati\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 361,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  sx: {\n                    mb: 2\n                  },\n                  children: \"Ti suggerir\\xF2 i metadati pi\\xF9 adatti per migliorare la visibilit\\xE0 organica e le vendite sugli store.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  color: \"primary\",\n                  onClick: () => handleExpand('metadata'),\n                  endIcon: expandedCard === 'metadata' ? /*#__PURE__*/_jsxDEV(KeyboardArrowUpIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 60\n                  }, this) : /*#__PURE__*/_jsxDEV(KeyboardArrowDownIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 86\n                  }, this),\n                  children: \"ESPANDI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                  in: expandedCard === 'metadata',\n                  timeout: \"auto\",\n                  unmountOnExit: true,\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      mt: 3,\n                      display: 'flex',\n                      flexDirection: 'column',\n                      gap: 4\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: 'flex',\n                        flexDirection: 'column',\n                        gap: 3\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Box, {\n                        sx: {\n                          display: 'flex',\n                          justifyContent: 'center'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          variant: \"contained\",\n                          color: \"primary\",\n                          startIcon: isGeneratingAll ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                            size: 20,\n                            color: \"inherit\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 388,\n                            columnNumber: 58\n                          }, this) : /*#__PURE__*/_jsxDEV(CategoryIcon, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 388,\n                            columnNumber: 107\n                          }, this),\n                          onClick: handleGenerateCategories,\n                          disabled: isGeneratingAll,\n                          sx: generateButtonStyle,\n                          children: isGeneratingAll ? 'GENERAZIONE IN CORSO...' : 'GENERA CATEGORIE'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 385,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 384,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                        in: showCategories,\n                        timeout: 500,\n                        sx: {\n                          '& .MuiCollapse-wrapperInner': {\n                            opacity: showCategories ? 1 : 0,\n                            transform: `translateY(${showCategories ? 0 : -20}px)`,\n                            transition: 'opacity 500ms ease-out, transform 500ms ease-out'\n                          }\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Box, {\n                          sx: {\n                            display: 'flex',\n                            flexDirection: 'column',\n                            gap: 2,\n                            mt: 3\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(Paper, {\n                            sx: {\n                              p: 2,\n                              backgroundColor: alpha('#4B6BFB', 0.04),\n                              border: '1px solid',\n                              borderColor: 'primary.main'\n                            },\n                            children: [/*#__PURE__*/_jsxDEV(Box, {\n                              sx: {\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                mb: 1\n                              },\n                              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                                variant: \"subtitle2\",\n                                color: \"primary\",\n                                children: \"Categoria Principale\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 429,\n                                columnNumber: 33\n                              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                                size: \"small\",\n                                onClick: () => handleRegenerateCategory('main'),\n                                sx: {\n                                  color: 'primary.main'\n                                },\n                                disabled: generatingStates.main,\n                                children: generatingStates.main ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                                  size: 20\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 438,\n                                  columnNumber: 60\n                                }, this) : /*#__PURE__*/_jsxDEV(RefreshIcon, {\n                                  fontSize: \"small\"\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 438,\n                                  columnNumber: 93\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 432,\n                                columnNumber: 33\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 423,\n                              columnNumber: 31\n                            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                              variant: \"body2\",\n                              children: (categories === null || categories === void 0 ? void 0 : categories.mainCategory) || ''\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 441,\n                              columnNumber: 31\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 415,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(Box, {\n                            sx: {\n                              display: 'flex',\n                              gap: 2\n                            },\n                            children: [1, 2].map(num => {\n                              var _categories$secondary;\n                              return /*#__PURE__*/_jsxDEV(Paper, {\n                                sx: {\n                                  p: 2,\n                                  flex: 1,\n                                  backgroundColor: alpha('#4B6BFB', 0.02),\n                                  border: '1px solid',\n                                  borderColor: alpha('#4B6BFB', 0.2)\n                                },\n                                children: [/*#__PURE__*/_jsxDEV(Box, {\n                                  sx: {\n                                    display: 'flex',\n                                    justifyContent: 'space-between',\n                                    alignItems: 'center',\n                                    mb: 1\n                                  },\n                                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                                    variant: \"subtitle2\",\n                                    color: \"primary\",\n                                    children: [\"Categoria Secondaria \", num]\n                                  }, void 0, true, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 465,\n                                    columnNumber: 37\n                                  }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                                    size: \"small\",\n                                    onClick: () => handleRegenerateCategory(`secondary${num}`),\n                                    sx: {\n                                      color: 'primary.main'\n                                    },\n                                    disabled: generatingStates[`secondary${num}`],\n                                    children: generatingStates[`secondary${num}`] ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                                      size: 20\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 474,\n                                      columnNumber: 78\n                                    }, this) : /*#__PURE__*/_jsxDEV(RefreshIcon, {\n                                      fontSize: \"small\"\n                                    }, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 474,\n                                      columnNumber: 111\n                                    }, this)\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 468,\n                                    columnNumber: 37\n                                  }, this)]\n                                }, void 0, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 459,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                                  variant: \"body2\",\n                                  children: (categories === null || categories === void 0 ? void 0 : (_categories$secondary = categories.secondaryCategories) === null || _categories$secondary === void 0 ? void 0 : _categories$secondary[num - 1]) || ''\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 477,\n                                  columnNumber: 35\n                                }, this)]\n                              }, num, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 449,\n                                columnNumber: 33\n                              }, this);\n                            })\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 447,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 408,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 397,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 383,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: 'flex',\n                        flexDirection: 'column',\n                        gap: 3\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(Box, {\n                        sx: {\n                          display: 'flex',\n                          justifyContent: 'center'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          variant: \"contained\",\n                          color: \"primary\",\n                          startIcon: isGeneratingKeywords ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                            size: 20,\n                            color: \"inherit\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 492,\n                            columnNumber: 63\n                          }, this) : /*#__PURE__*/_jsxDEV(KeyIcon, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 492,\n                            columnNumber: 112\n                          }, this),\n                          onClick: handleGenerateKeywords,\n                          disabled: isGeneratingKeywords,\n                          sx: generateButtonStyle,\n                          children: isGeneratingKeywords ? 'GENERAZIONE IN CORSO...' : 'GENERA KEYWORDS'\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 489,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 488,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                        in: showKeywords,\n                        timeout: 500,\n                        sx: {\n                          '& .MuiCollapse-wrapperInner': {\n                            opacity: showKeywords ? 1 : 0,\n                            transform: `translateY(${showKeywords ? 0 : -20}px)`,\n                            transition: 'opacity 500ms ease-out, transform 500ms ease-out'\n                          }\n                        },\n                        children: /*#__PURE__*/_jsxDEV(Box, {\n                          sx: {\n                            display: 'grid',\n                            gridTemplateColumns: 'repeat(2, 1fr)',\n                            gap: 2,\n                            mt: 3\n                          },\n                          children: [0, 1, 2, 3].map(index => {\n                            var _keywords$keywords;\n                            return /*#__PURE__*/_jsxDEV(Paper, {\n                              sx: {\n                                p: 2,\n                                backgroundColor: alpha('#4B6BFB', 0.02),\n                                border: '1px solid',\n                                borderColor: alpha('#4B6BFB', 0.2)\n                              },\n                              children: [/*#__PURE__*/_jsxDEV(Box, {\n                                sx: {\n                                  display: 'flex',\n                                  justifyContent: 'space-between',\n                                  alignItems: 'center',\n                                  mb: 1\n                                },\n                                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                                  variant: \"subtitle2\",\n                                  color: \"primary\",\n                                  children: [\"Keyword \", index + 1]\n                                }, void 0, true, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 534,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                                  size: \"small\",\n                                  onClick: () => handleRegenerateKeyword(index),\n                                  sx: {\n                                    color: 'primary.main'\n                                  },\n                                  disabled: keywordGeneratingStates[`keyword${index}`],\n                                  children: keywordGeneratingStates[`keyword${index}`] ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                                    size: 20\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 544,\n                                    columnNumber: 39\n                                  }, this) : /*#__PURE__*/_jsxDEV(RefreshIcon, {\n                                    fontSize: \"small\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 545,\n                                    columnNumber: 39\n                                  }, this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 537,\n                                  columnNumber: 35\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 528,\n                                columnNumber: 33\n                              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                                variant: \"body2\",\n                                children: (keywords === null || keywords === void 0 ? void 0 : (_keywords$keywords = keywords.keywords) === null || _keywords$keywords === void 0 ? void 0 : _keywords$keywords[index]) || ''\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 549,\n                                columnNumber: 33\n                              }, this)]\n                            }, index, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 519,\n                              columnNumber: 31\n                            }, this);\n                          })\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 512,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 501,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 487,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 360,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            sx: {\n              p: 3,\n              '&:hover': {\n                boxShadow: '0px 8px 24px rgba(0, 0, 0, 0.08)'\n              }\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'flex-start'\n              },\n              children: [/*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  mr: 3,\n                  backgroundColor: '#F8F9FF',\n                  borderRadius: '12px',\n                  p: 2\n                },\n                children: /*#__PURE__*/_jsxDEV(CoverIcon, {\n                  sx: {\n                    fontSize: 48,\n                    color: 'primary.main'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 574,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  flexGrow: 1\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Crea un'immagine di copertina\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 585,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  color: \"text.secondary\",\n                  sx: {\n                    mb: 2\n                  },\n                  children: \"Sceglier\\xF2 delle scene basandomi sul tuo manoscritto che ne rappresentino bene il contenuto e l'atmosfera. Dopodich\\xE9 creer\\xF2 una immagine di copertina per ognuna che potrai modificare, rigenerare completamente e scaricare in vari formati.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"outlined\",\n                  color: \"primary\",\n                  onClick: () => handleExpand('cover'),\n                  endIcon: expandedCard === 'cover' ? /*#__PURE__*/_jsxDEV(KeyboardArrowUpIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 595,\n                    columnNumber: 57\n                  }, this) : /*#__PURE__*/_jsxDEV(KeyboardArrowDownIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 595,\n                    columnNumber: 83\n                  }, this),\n                  children: \"ESPANDI\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                  in: expandedCard === 'cover',\n                  timeout: \"auto\",\n                  unmountOnExit: true,\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      mt: 3,\n                      display: 'flex',\n                      flexDirection: 'column',\n                      gap: 2\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: 'flex',\n                        justifyContent: 'center',\n                        mb: 3\n                      },\n                      children: /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"contained\",\n                        color: \"primary\",\n                        startIcon: isGeneratingCovers ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                          size: 20,\n                          color: \"inherit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 611,\n                          columnNumber: 59\n                        }, this) : /*#__PURE__*/_jsxDEV(ImageIcon, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 611,\n                          columnNumber: 108\n                        }, this),\n                        onClick: handleGenerateCovers,\n                        disabled: isGeneratingCovers,\n                        sx: generateButtonStyle,\n                        children: isGeneratingCovers ? 'GENERAZIONE IN CORSO...' : 'GENERA COPERTINE'\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 608,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 607,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n                      in: showCovers && !isGeneratingCovers,\n                      timeout: \"auto\",\n                      unmountOnExit: true,\n                      children: /*#__PURE__*/_jsxDEV(Box, {\n                        sx: {\n                          mt: 3\n                        },\n                        children: [/*#__PURE__*/_jsxDEV(Box, {\n                          sx: {\n                            display: 'flex',\n                            alignItems: 'center',\n                            backgroundColor: '#F8F9FF',\n                            borderRadius: '12px',\n                            p: 2,\n                            mb: 3\n                          },\n                          children: [/*#__PURE__*/_jsxDEV(ArticleIcon, {\n                            sx: {\n                              color: 'primary.main',\n                              mr: 2\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 631,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                            color: \"primary\",\n                            children: \"Ho identificato quattro scene che potrebbero interessarti. Scegli quella che preferisci e personalizza le copertine come meglio credi.\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 632,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 623,\n                          columnNumber: 27\n                        }, this), [0, 1, 2].map(index => {\n                          var _currentBook$metadata, _currentBook$metadata2, _currentBook$metadata3, _currentBook$metadata4, _currentBook$metadata5, _currentBook$metadata6, _currentBook$metadata7, _currentBook$metadata8, _currentBook$metadata9, _currentBook$metadata10, _currentBook$metadata11, _currentBook$metadata12;\n                          return /*#__PURE__*/_jsxDEV(Paper, {\n                            sx: {\n                              p: 3,\n                              mb: 2,\n                              backgroundColor: 'background.paper',\n                              '&:hover': {\n                                boxShadow: '0px 8px 24px rgba(0, 0, 0, 0.08)'\n                              }\n                            },\n                            children: /*#__PURE__*/_jsxDEV(Box, {\n                              sx: {\n                                display: 'flex',\n                                gap: 3\n                              },\n                              children: [/*#__PURE__*/_jsxDEV(Box, {\n                                sx: {\n                                  width: 180,\n                                  height: 270,\n                                  backgroundColor: alpha('#4B6BFB', 0.1),\n                                  borderRadius: 2,\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  justifyContent: 'center',\n                                  overflow: 'hidden'\n                                },\n                                children: currentBook !== null && currentBook !== void 0 && (_currentBook$metadata = currentBook.metadata) !== null && _currentBook$metadata !== void 0 && (_currentBook$metadata2 = _currentBook$metadata.covers) !== null && _currentBook$metadata2 !== void 0 && (_currentBook$metadata3 = _currentBook$metadata2.scenes) !== null && _currentBook$metadata3 !== void 0 && (_currentBook$metadata4 = _currentBook$metadata3[index]) !== null && _currentBook$metadata4 !== void 0 && _currentBook$metadata4.imageUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n                                  src: currentBook.metadata.covers.scenes[index].imageUrl,\n                                  alt: `Cover ${index + 1}`,\n                                  style: {\n                                    width: '100%',\n                                    height: '100%',\n                                    objectFit: 'cover'\n                                  }\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 665,\n                                  columnNumber: 37\n                                }, this) : /*#__PURE__*/_jsxDEV(ImageIcon, {\n                                  sx: {\n                                    fontSize: 48,\n                                    color: 'primary.main',\n                                    opacity: 0.5\n                                  }\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 671,\n                                  columnNumber: 37\n                                }, this)\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 652,\n                                columnNumber: 33\n                              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                                sx: {\n                                  flex: 1\n                                },\n                                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                                  variant: \"h6\",\n                                  gutterBottom: true,\n                                  children: (currentBook === null || currentBook === void 0 ? void 0 : (_currentBook$metadata5 = currentBook.metadata) === null || _currentBook$metadata5 === void 0 ? void 0 : (_currentBook$metadata6 = _currentBook$metadata5.covers) === null || _currentBook$metadata6 === void 0 ? void 0 : (_currentBook$metadata7 = _currentBook$metadata6.scenes) === null || _currentBook$metadata7 === void 0 ? void 0 : (_currentBook$metadata8 = _currentBook$metadata7[index]) === null || _currentBook$metadata8 === void 0 ? void 0 : _currentBook$metadata8.title) || ''\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 677,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                                  variant: \"body2\",\n                                  color: \"text.secondary\",\n                                  paragraph: true,\n                                  children: (currentBook === null || currentBook === void 0 ? void 0 : (_currentBook$metadata9 = currentBook.metadata) === null || _currentBook$metadata9 === void 0 ? void 0 : (_currentBook$metadata10 = _currentBook$metadata9.covers) === null || _currentBook$metadata10 === void 0 ? void 0 : (_currentBook$metadata11 = _currentBook$metadata10.scenes) === null || _currentBook$metadata11 === void 0 ? void 0 : (_currentBook$metadata12 = _currentBook$metadata11[index]) === null || _currentBook$metadata12 === void 0 ? void 0 : _currentBook$metadata12.description) || ''\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 680,\n                                  columnNumber: 35\n                                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                                  sx: {\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    gap: 2\n                                  },\n                                  children: /*#__PURE__*/_jsxDEV(Button, {\n                                    variant: \"outlined\",\n                                    size: \"small\",\n                                    startIcon: /*#__PURE__*/_jsxDEV(FileDownloadIcon, {}, void 0, false, {\n                                      fileName: _jsxFileName,\n                                      lineNumber: 688,\n                                      columnNumber: 50\n                                    }, this),\n                                    onClick: () => navigate('/cover-selection', {\n                                      state: {\n                                        bookId: currentBook.id,\n                                        scene: currentBook.metadata.covers.scenes[index],\n                                        index: index\n                                      }\n                                    }),\n                                    children: \"VEDI COPERTINA\"\n                                  }, void 0, false, {\n                                    fileName: _jsxFileName,\n                                    lineNumber: 685,\n                                    columnNumber: 37\n                                  }, this)\n                                }, void 0, false, {\n                                  fileName: _jsxFileName,\n                                  lineNumber: 684,\n                                  columnNumber: 35\n                                }, this)]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 676,\n                                columnNumber: 33\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 650,\n                              columnNumber: 31\n                            }, this)\n                          }, index, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 639,\n                            columnNumber: 29\n                          }, this);\n                        })]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 621,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 620,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 601,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 600,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 584,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 4,\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: \"\\xA9 2024 Marco Luigi Palma - All rights reserved.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            size: \"small\",\n            children: \"View Privacy Policy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            size: \"small\",\n            children: \"Terms & Conditions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 718,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 714,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: !!error,\n        autoHideDuration: 6000,\n        onClose: handleCloseSnackbar,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: handleCloseSnackbar,\n          severity: \"error\",\n          sx: {\n            width: '100%'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 725,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: !!success,\n        autoHideDuration: 3000,\n        onClose: handleCloseSnackbar,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: handleCloseSnackbar,\n          severity: \"success\",\n          sx: {\n            width: '100%'\n          },\n          children: success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 742,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 736,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 303,\n    columnNumber: 5\n  }, this);\n};\n_s(TaskDashboard, \"yt6xBj0dVNvqlA/2LqRfvekfvqg=\", false, function () {\n  return [useLocation, useNavigate, useBooks];\n});\n_c = TaskDashboard;\nexport default TaskDashboard;\nvar _c;\n$RefreshReg$(_c, \"TaskDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","Box","Typography","Button","Container","Paper","Grid","IconButton","Collapse","CircularProgress","Alert","Snackbar","MetadataIcon","CoverIcon","ArrowBackIcon","KeyboardArrowDownIcon","KeyboardArrowUpIcon","CategoryIcon","KeyIcon","RefreshIcon","ImageIcon","FileDownloadIcon","ArticleIcon","useBooks","alpha","jsxDEV","_jsxDEV","TaskDashboard","_s","location","navigate","books","setBooks","isGenerating","generateCategories","generateKeywords","regenerateCategory","regenerateKeyword","generateScenes","generateCoverImages","currentBook","setCurrentBook","expandedCard","setExpandedCard","showCategories","setShowCategories","showKeywords","setShowKeywords","showCovers","setShowCovers","categories","setCategories","keywords","setKeywords","error","setError","success","setSuccess","generatingStates","setGeneratingStates","main","secondary1","secondary2","isGeneratingAll","setIsGeneratingAll","isGeneratingKeywords","setIsGeneratingKeywords","isGeneratingCovers","setIsGeneratingCovers","keywordGeneratingStates","setKeywordGeneratingStates","secondary3","_location$state","bookName","state","book","find","b","title","_book$metadata","_book$metadata$covers","_book$metadata$covers2","savedShowCovers","localStorage","getItem","id","metadata","covers","scenes","length","handleExpand","cardId","handleGenerateCategories","result","console","handleGenerateKeywords","handleRegenerateCategory","type","prev","mainCategory","secondaryCategories","Error","currentCategories","category","index","map","cat","idx","message","handleRegenerateKeyword","kw","keyword","retryOperation","operation","maxRetries","i","Promise","resolve","setTimeout","handleGenerateCovers","log","scenesResult","coversResult","updatedBook","scene","imageUrl","selectedScene","bookIndex","findIndex","newBooks","setItem","removeItem","handleCloseSnackbar","generateButtonStyle","minWidth","maxWidth","height","borderRadius","textTransform","fontSize","fontWeight","boxShadow","backgroundColor","sx","minHeight","children","py","display","alignItems","mb","onClick","mr","color","fileName","_jsxFileName","lineNumber","columnNumber","variant","date","component","container","spacing","item","xs","p","flexGrow","gutterBottom","endIcon","in","timeout","unmountOnExit","mt","flexDirection","gap","justifyContent","startIcon","size","disabled","opacity","transform","transition","border","borderColor","num","_categories$secondary","flex","gridTemplateColumns","_keywords$keywords","_currentBook$metadata","_currentBook$metadata2","_currentBook$metadata3","_currentBook$metadata4","_currentBook$metadata5","_currentBook$metadata6","_currentBook$metadata7","_currentBook$metadata8","_currentBook$metadata9","_currentBook$metadata10","_currentBook$metadata11","_currentBook$metadata12","width","overflow","src","alt","style","objectFit","paragraph","description","bookId","textAlign","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","_c","$RefreshReg$"],"sources":["/Users/marcolp/AI/CURSOR projects/Lose/frontend/src/components/dashboard/TaskDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Typography,\n  Button,\n  Container,\n  Paper,\n  Grid,\n  IconButton,\n  Collapse,\n  CircularProgress,\n  Alert,\n  Snackbar\n} from '@mui/material';\nimport MetadataIcon from '@mui/icons-material/Description';\nimport CoverIcon from '@mui/icons-material/Image';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport CategoryIcon from '@mui/icons-material/Category';\nimport KeyIcon from '@mui/icons-material/Key';\nimport RefreshIcon from '@mui/icons-material/Refresh';\nimport ImageIcon from '@mui/icons-material/Image';\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\nimport ArticleIcon from '@mui/icons-material/Article';\nimport { useBooks } from '../../context/BookContext';\nimport { alpha } from '@mui/material/styles';\n\nconst TaskDashboard = () => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { \n    books, \n    setBooks, \n    isGenerating, \n    generateCategories, \n    generateKeywords, \n    regenerateCategory, \n    regenerateKeyword, \n    generateScenes, \n    generateCoverImages\n  } = useBooks();\n  const [currentBook, setCurrentBook] = useState(null);\n  const [expandedCard, setExpandedCard] = useState(null);\n  const [showCategories, setShowCategories] = useState(false);\n  const [showKeywords, setShowKeywords] = useState(false);\n  const [showCovers, setShowCovers] = useState(false);\n  const [categories, setCategories] = useState(null);\n  const [keywords, setKeywords] = useState(null);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [generatingStates, setGeneratingStates] = useState({\n    main: false,\n    secondary1: false,\n    secondary2: false\n  });\n  const [isGeneratingAll, setIsGeneratingAll] = useState(false);\n  const [isGeneratingKeywords, setIsGeneratingKeywords] = useState(false);\n  const [isGeneratingCovers, setIsGeneratingCovers] = useState(false);\n  const [keywordGeneratingStates, setKeywordGeneratingStates] = useState({\n    main: false,\n    secondary1: false,\n    secondary2: false,\n    secondary3: false\n  });\n\n  useEffect(() => {\n    const bookName = location.state?.bookName;\n    if (bookName) {\n      const book = books.find(b => b.title === bookName);\n      if (book) {\n        setCurrentBook(book);\n        const savedShowCovers = localStorage.getItem(`showCovers_${book.id}`);\n        if (savedShowCovers === 'true' && book.metadata?.covers?.scenes?.length > 0) {\n          setShowCovers(true);\n        }\n        if (book.metadata) {\n          if (book.metadata.categories) {\n            setCategories(book.metadata.categories);\n          }\n          if (book.metadata.keywords && book.metadata.keywords.length > 0) {\n            setKeywords({ keywords: book.metadata.keywords });\n          }\n        } else {\n          setCategories(null);\n          setKeywords(null);\n          setShowCategories(false);\n          setShowKeywords(false);\n        }\n      } else {\n        navigate('/');\n      }\n    }\n  }, [location.state, books, navigate]);\n\n  const handleExpand = (cardId) => {\n    setExpandedCard(expandedCard === cardId ? null : cardId);\n  };\n\n  const handleGenerateCategories = async () => {\n    try {\n      setError(null);\n      setIsGeneratingAll(true);\n      setShowCategories(true);\n      const result = await generateCategories(currentBook.id);\n      setCategories(result);\n      setSuccess('Categorie generate con successo');\n    } catch (error) {\n      console.error('Error:', error);\n      setError('Errore nella generazione delle categorie. Riprova.');\n    } finally {\n      setIsGeneratingAll(false);\n    }\n  };\n\n  const handleGenerateKeywords = async () => {\n    try {\n      setError(null);\n      setIsGeneratingKeywords(true);\n      setShowKeywords(true);\n      const result = await generateKeywords(currentBook.id);\n      setKeywords(result);\n      setSuccess('Keywords generate con successo');\n    } catch (error) {\n      console.error('Error:', error);\n      setError('Errore nella generazione delle keywords. Riprova.');\n    } finally {\n      setIsGeneratingKeywords(false);\n    }\n  };\n\n  const handleRegenerateCategory = async (type) => {\n    try {\n      setError(null);\n      setGeneratingStates(prev => ({ ...prev, [type]: true }));\n      \n      if (!categories || !categories.mainCategory || !categories.secondaryCategories) {\n        throw new Error('No categories available. Generate categories first.');\n      }\n      \n      const currentCategories = {\n        mainCategory: categories.mainCategory,\n        secondaryCategories: categories.secondaryCategories || []\n      };\n      \n      const result = await regenerateCategory(currentBook.id, type, currentCategories);\n      \n      if (type === 'main') {\n        setCategories(prev => ({\n          ...prev,\n          mainCategory: result.category\n        }));\n      } else {\n        const index = type === 'secondary1' ? 0 : 1;\n        setCategories(prev => ({\n          ...prev,\n          secondaryCategories: prev.secondaryCategories.map((cat, idx) => \n            idx === index ? result.category : cat\n          )\n        }));\n      }\n      \n      setSuccess(`Categoria ${type === 'main' ? 'principale' : 'secondaria'} rigenerata con successo`);\n    } catch (error) {\n      console.error('Error:', error);\n      setError(error.message || `Errore nella rigenerazione della categoria ${type === 'main' ? 'principale' : 'secondaria'}. Riprova.`);\n    } finally {\n      setGeneratingStates(prev => ({ ...prev, [type]: false }));\n    }\n  };\n\n  const handleRegenerateKeyword = async (index) => {\n    try {\n      setError(null);\n      setKeywordGeneratingStates(prev => ({ ...prev, [`keyword${index}`]: true }));\n      \n      if (!keywords || !keywords.keywords) {\n        throw new Error('No keywords available. Generate keywords first.');\n      }\n      \n      const result = await regenerateKeyword(currentBook.id, index, keywords);\n      \n      setKeywords(prev => ({\n        ...prev,\n        keywords: prev.keywords.map((kw, idx) => \n          idx === index ? result.keyword : kw\n        )\n      }));\n      \n      setSuccess('Keyword rigenerata con successo');\n    } catch (error) {\n      console.error('Error:', error);\n      setError(error.message || 'Errore nella rigenerazione della keyword. Riprova.');\n    } finally {\n      setKeywordGeneratingStates(prev => ({ ...prev, [`keyword${index}`]: false }));\n    }\n  };\n\n  const retryOperation = async (operation, maxRetries = 3) => {\n    for (let i = 0; i < maxRetries; i++) {\n      try {\n        return await operation();\n      } catch (error) {\n        if (i === maxRetries - 1) throw error;\n        await new Promise(resolve => setTimeout(resolve, 1000 * (i + 1)));\n      }\n    }\n  };\n\n  const handleGenerateCovers = async () => {\n    try {\n      console.log('Starting cover generation process...');\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingCovers(true);\n      \n      // Utilizziamo il retry per generateScenes\n      const scenesResult = await retryOperation(async () => {\n        console.log('Calling generateScenes with bookId:', currentBook.id);\n        return await generateScenes(currentBook.id);\n      });\n      \n      // Aggiungiamo un piccolo delay dopo generateScenes\n      await new Promise(resolve => setTimeout(resolve, 100));\n      \n      if (!scenesResult || !scenesResult.scenes) {\n        console.error('Invalid scenes result:', scenesResult);\n        throw new Error('Failed to generate scenes');\n      }\n\n      // Aggiungiamo un altro piccolo delay prima di generateCoverImages\n      await new Promise(resolve => setTimeout(resolve, 100));\n\n      // Utilizziamo il retry per generateCoverImages\n      const coversResult = await retryOperation(async () => {\n        console.log('Generating cover images for scenes...');\n        return await generateCoverImages(currentBook.id, scenesResult.scenes);\n      });\n\n      // Aggiungiamo un ultimo delay prima di aggiornare lo stato\n      await new Promise(resolve => setTimeout(resolve, 100));\n\n      // Aggiorniamo il libro con scene e copertine\n      const updatedBook = { ...currentBook };\n      updatedBook.metadata = {\n        ...updatedBook.metadata,\n        covers: {\n          scenes: scenesResult.scenes.map((scene, index) => ({\n            ...scene,\n            imageUrl: coversResult.covers[index].imageUrl\n          })),\n          selectedScene: null\n        }\n      };\n      \n      console.log('Finding book index...');\n      const bookIndex = books.findIndex(b => b.id === currentBook.id);\n      if (bookIndex !== -1) {\n        console.log('Updating books array...');\n        const newBooks = [...books];\n        newBooks[bookIndex] = updatedBook;\n        setBooks(newBooks);\n        setCurrentBook(updatedBook);\n      }\n      \n      setShowCovers(true);\n      localStorage.setItem(`showCovers_${currentBook.id}`, 'true');\n      setSuccess('Copertine generate con successo');\n    } catch (error) {\n      console.error('Error in handleGenerateCovers:', error);\n      setError('Errore nella generazione delle copertine. Riprova.');\n      setShowCovers(false);\n      localStorage.removeItem(`showCovers_${currentBook.id}`);\n    } finally {\n      setIsGeneratingCovers(false);\n    }\n  };\n\n  const handleCloseSnackbar = () => {\n    setError(null);\n    setSuccess(null);\n  };\n\n  if (!currentBook) return null;\n\n  const generateButtonStyle = {\n    minWidth: '200px',\n    maxWidth: '300px',\n    height: '48px',\n    borderRadius: '8px',\n    textTransform: 'uppercase',\n    fontSize: '1rem',\n    fontWeight: 500,\n    boxShadow: '0 4px 12px rgba(75, 107, 251, 0.2)',\n    '&:hover': {\n      boxShadow: '0 6px 16px rgba(75, 107, 251, 0.3)',\n      backgroundColor: 'primary.dark'\n    }\n  };\n\n  return (\n    <Box sx={{ backgroundColor: '#F8F9FA', minHeight: '100vh' }}>\n      <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 4 }}>\n          <IconButton \n            onClick={() => navigate('/')}\n            sx={{ \n              mr: 2,\n              color: 'text.secondary',\n              '&:hover': {\n                backgroundColor: 'rgba(0, 0, 0, 0.04)'\n              }\n            }}\n          >\n            <ArrowBackIcon />\n          </IconButton>\n          <Box>\n            <Typography \n              variant=\"subtitle2\" \n              color=\"text.secondary\"\n              sx={{ mb: 1 }}\n            >\n              {currentBook.date}\n            </Typography>\n            <Typography \n              variant=\"h5\" \n              component=\"h1\"\n              sx={{ \n                fontWeight: 500,\n                color: 'text.primary'\n              }}\n            >\n              {currentBook.title}\n            </Typography>\n          </Box>\n        </Box>\n\n        <Grid container spacing={3}>\n          <Grid item xs={12}>\n            <Paper \n              sx={{ \n                p: 3,\n                '&:hover': {\n                  boxShadow: '0px 8px 24px rgba(0, 0, 0, 0.08)',\n                }\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'flex-start' }}>\n                <Box \n                  sx={{ \n                    mr: 3,\n                    backgroundColor: '#F8F9FF',\n                    borderRadius: '12px',\n                    p: 2\n                  }}\n                >\n                  <MetadataIcon sx={{ fontSize: 48, color: 'primary.main' }} />\n                </Box>\n                <Box sx={{ flexGrow: 1 }}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Crea e ottimizza i metadati\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Ti suggerir i metadati pi adatti per migliorare la visibilit organica e le vendite sugli store.\n                  </Typography>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={() => handleExpand('metadata')}\n                    endIcon={expandedCard === 'metadata' ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n                  >\n                    ESPANDI\n                  </Button>\n                  \n                  <Collapse in={expandedCard === 'metadata'} timeout=\"auto\" unmountOnExit>\n                    <Box sx={{ \n                      mt: 3, \n                      display: 'flex', \n                      flexDirection: 'column', \n                      gap: 4 \n                    }}>\n                      <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'center' }}>\n                          <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            startIcon={isGeneratingAll ? <CircularProgress size={20} color=\"inherit\" /> : <CategoryIcon />}\n                            onClick={handleGenerateCategories}\n                            disabled={isGeneratingAll}\n                            sx={generateButtonStyle}\n                          >\n                            {isGeneratingAll ? 'GENERAZIONE IN CORSO...' : 'GENERA CATEGORIE'}\n                          </Button>\n                        </Box>\n\n                        <Collapse \n                          in={showCategories} \n                          timeout={500}\n                          sx={{\n                            '& .MuiCollapse-wrapperInner': {\n                              opacity: showCategories ? 1 : 0,\n                              transform: `translateY(${showCategories ? 0 : -20}px)`,\n                              transition: 'opacity 500ms ease-out, transform 500ms ease-out'\n                            }\n                          }}\n                        >\n                          <Box sx={{ \n                            display: 'flex',\n                            flexDirection: 'column',\n                            gap: 2,\n                            mt: 3\n                          }}>\n                            {/* Categoria Principale */}\n                            <Paper\n                              sx={{\n                                p: 2,\n                                backgroundColor: alpha('#4B6BFB', 0.04),\n                                border: '1px solid',\n                                borderColor: 'primary.main'\n                              }}\n                            >\n                              <Box sx={{ \n                                display: 'flex', \n                                justifyContent: 'space-between',\n                                alignItems: 'center',\n                                mb: 1\n                              }}>\n                                <Typography variant=\"subtitle2\" color=\"primary\">\n                                  Categoria Principale\n                                </Typography>\n                                <IconButton \n                                  size=\"small\"\n                                  onClick={() => handleRegenerateCategory('main')}\n                                  sx={{ color: 'primary.main' }}\n                                  disabled={generatingStates.main}\n                                >\n                                  {generatingStates.main ? <CircularProgress size={20} /> : <RefreshIcon fontSize=\"small\" />}\n                                </IconButton>\n                              </Box>\n                              <Typography variant=\"body2\">\n                                {categories?.mainCategory || ''}\n                              </Typography>\n                            </Paper>\n\n                            {/* Categorie Secondarie */}\n                            <Box sx={{ display: 'flex', gap: 2 }}>\n                              {[1, 2].map((num) => (\n                                <Paper\n                                  key={num}\n                                  sx={{\n                                    p: 2,\n                                    flex: 1,\n                                    backgroundColor: alpha('#4B6BFB', 0.02),\n                                    border: '1px solid',\n                                    borderColor: alpha('#4B6BFB', 0.2)\n                                  }}\n                                >\n                                  <Box sx={{ \n                                    display: 'flex', \n                                    justifyContent: 'space-between',\n                                    alignItems: 'center',\n                                    mb: 1\n                                  }}>\n                                    <Typography variant=\"subtitle2\" color=\"primary\">\n                                      Categoria Secondaria {num}\n                                    </Typography>\n                                    <IconButton \n                                      size=\"small\"\n                                      onClick={() => handleRegenerateCategory(`secondary${num}`)}\n                                      sx={{ color: 'primary.main' }}\n                                      disabled={generatingStates[`secondary${num}`]}\n                                    >\n                                      {generatingStates[`secondary${num}`] ? <CircularProgress size={20} /> : <RefreshIcon fontSize=\"small\" />}\n                                    </IconButton>\n                                  </Box>\n                                  <Typography variant=\"body2\">\n                                    {categories?.secondaryCategories?.[num - 1] || ''}\n                                  </Typography>\n                                </Paper>\n                              ))}\n                            </Box>\n                          </Box>\n                        </Collapse>\n                      </Box>\n\n                      <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\n                        <Box sx={{ display: 'flex', justifyContent: 'center' }}>\n                          <Button\n                            variant=\"contained\"\n                            color=\"primary\"\n                            startIcon={isGeneratingKeywords ? <CircularProgress size={20} color=\"inherit\" /> : <KeyIcon />}\n                            onClick={handleGenerateKeywords}\n                            disabled={isGeneratingKeywords}\n                            sx={generateButtonStyle}\n                          >\n                            {isGeneratingKeywords ? 'GENERAZIONE IN CORSO...' : 'GENERA KEYWORDS'}\n                          </Button>\n                        </Box>\n\n                        <Collapse \n                          in={showKeywords} \n                          timeout={500}\n                          sx={{\n                            '& .MuiCollapse-wrapperInner': {\n                              opacity: showKeywords ? 1 : 0,\n                              transform: `translateY(${showKeywords ? 0 : -20}px)`,\n                              transition: 'opacity 500ms ease-out, transform 500ms ease-out'\n                            }\n                          }}\n                        >\n                          <Box sx={{ \n                            display: 'grid',\n                            gridTemplateColumns: 'repeat(2, 1fr)',\n                            gap: 2,\n                            mt: 3\n                          }}>\n                            {[0, 1, 2, 3].map((index) => (\n                              <Paper\n                                key={index}\n                                sx={{\n                                  p: 2,\n                                  backgroundColor: alpha('#4B6BFB', 0.02),\n                                  border: '1px solid',\n                                  borderColor: alpha('#4B6BFB', 0.2)\n                                }}\n                              >\n                                <Box sx={{ \n                                  display: 'flex', \n                                  justifyContent: 'space-between',\n                                  alignItems: 'center',\n                                  mb: 1\n                                }}>\n                                  <Typography variant=\"subtitle2\" color=\"primary\">\n                                    Keyword {index + 1}\n                                  </Typography>\n                                  <IconButton \n                                    size=\"small\"\n                                    onClick={() => handleRegenerateKeyword(index)}\n                                    sx={{ color: 'primary.main' }}\n                                    disabled={keywordGeneratingStates[`keyword${index}`]}\n                                  >\n                                    {keywordGeneratingStates[`keyword${index}`] ? \n                                      <CircularProgress size={20} /> : \n                                      <RefreshIcon fontSize=\"small\" />\n                                    }\n                                  </IconButton>\n                                </Box>\n                                <Typography variant=\"body2\">\n                                  {keywords?.keywords?.[index] || ''}\n                                </Typography>\n                              </Paper>\n                            ))}\n                          </Box>\n                        </Collapse>\n                      </Box>\n                    </Box>\n                  </Collapse>\n                </Box>\n              </Box>\n            </Paper>\n          </Grid>\n\n          <Grid item xs={12}>\n            <Paper \n              sx={{ \n                p: 3,\n                '&:hover': {\n                  boxShadow: '0px 8px 24px rgba(0, 0, 0, 0.08)',\n                }\n              }}\n            >\n              <Box sx={{ display: 'flex', alignItems: 'flex-start' }}>\n                <Box \n                  sx={{ \n                    mr: 3,\n                    backgroundColor: '#F8F9FF',\n                    borderRadius: '12px',\n                    p: 2\n                  }}\n                >\n                  <CoverIcon sx={{ fontSize: 48, color: 'primary.main' }} />\n                </Box>\n                <Box sx={{ flexGrow: 1 }}>\n                  <Typography variant=\"h6\" gutterBottom>\n                    Crea un'immagine di copertina\n                  </Typography>\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n                    Sceglier delle scene basandomi sul tuo manoscritto che ne rappresentino bene il contenuto e l'atmosfera. Dopodich creer una immagine di copertina per ognuna che potrai modificare, rigenerare completamente e scaricare in vari formati.\n                  </Typography>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={() => handleExpand('cover')}\n                    endIcon={expandedCard === 'cover' ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />}\n                  >\n                    ESPANDI\n                  </Button>\n                  \n                  <Collapse in={expandedCard === 'cover'} timeout=\"auto\" unmountOnExit>\n                    <Box sx={{ \n                      mt: 3,\n                      display: 'flex',\n                      flexDirection: 'column',\n                      gap: 2\n                    }}>\n                      <Box sx={{ display: 'flex', justifyContent: 'center', mb: 3 }}>\n                        <Button\n                          variant=\"contained\"\n                          color=\"primary\"\n                          startIcon={isGeneratingCovers ? <CircularProgress size={20} color=\"inherit\" /> : <ImageIcon />}\n                          onClick={handleGenerateCovers}\n                          disabled={isGeneratingCovers}\n                          sx={generateButtonStyle}\n                        >\n                          {isGeneratingCovers ? 'GENERAZIONE IN CORSO...' : 'GENERA COPERTINE'}\n                        </Button>\n                      </Box>\n\n                      <Collapse in={showCovers && !isGeneratingCovers} timeout=\"auto\" unmountOnExit>\n                        <Box sx={{ mt: 3 }}>\n                          {/* AI Assistant Message */}\n                          <Box sx={{ \n                            display: 'flex', \n                            alignItems: 'center',\n                            backgroundColor: '#F8F9FF',\n                            borderRadius: '12px',\n                            p: 2,\n                            mb: 3\n                          }}>\n                            <ArticleIcon sx={{ color: 'primary.main', mr: 2 }} />\n                            <Typography color=\"primary\">\n                              Ho identificato quattro scene che potrebbero interessarti. Scegli quella che preferisci e personalizza le copertine come meglio credi.\n                            </Typography>\n                          </Box>\n\n                          {/* Cover Cards */}\n                          {[0, 1, 2].map((index) => (\n                            <Paper\n                              key={index}\n                              sx={{\n                                p: 3,\n                                mb: 2,\n                                backgroundColor: 'background.paper',\n                                '&:hover': {\n                                  boxShadow: '0px 8px 24px rgba(0, 0, 0, 0.08)',\n                                }\n                              }}\n                            >\n                              <Box sx={{ display: 'flex', gap: 3 }}>\n                                {/* Cover Preview */}\n                                <Box\n                                  sx={{\n                                    width: 180,\n                                    height: 270,\n                                    backgroundColor: alpha('#4B6BFB', 0.1),\n                                    borderRadius: 2,\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    justifyContent: 'center',\n                                    overflow: 'hidden'\n                                  }}\n                                >\n                                  {currentBook?.metadata?.covers?.scenes?.[index]?.imageUrl ? (\n                                    <img \n                                      src={currentBook.metadata.covers.scenes[index].imageUrl}\n                                      alt={`Cover ${index + 1}`}\n                                      style={{ width: '100%', height: '100%', objectFit: 'cover' }}\n                                    />\n                                  ) : (\n                                    <ImageIcon sx={{ fontSize: 48, color: 'primary.main', opacity: 0.5 }} />\n                                  )}\n                                </Box>\n\n                                {/* Content */}\n                                <Box sx={{ flex: 1 }}>\n                                  <Typography variant=\"h6\" gutterBottom>\n                                    {currentBook?.metadata?.covers?.scenes?.[index]?.title || ''}\n                                  </Typography>\n                                  <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                                    {currentBook?.metadata?.covers?.scenes?.[index]?.description || ''}\n                                  </Typography>\n                                  \n                                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\n                                    <Button\n                                      variant=\"outlined\"\n                                      size=\"small\"\n                                      startIcon={<FileDownloadIcon />}\n                                      onClick={() => navigate('/cover-selection', { \n                                        state: { \n                                          bookId: currentBook.id,\n                                          scene: currentBook.metadata.covers.scenes[index],\n                                          index: index\n                                        }\n                                      })}\n                                    >\n                                      VEDI COPERTINA\n                                    </Button>\n                                  </Box>\n                                </Box>\n                              </Box>\n                            </Paper>\n                          ))}\n                        </Box>\n                      </Collapse>\n                    </Box>\n                  </Collapse>\n                </Box>\n              </Box>\n            </Paper>\n          </Grid>\n        </Grid>\n\n        <Box sx={{ mt: 4, textAlign: 'center' }}>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n             2024 Marco Luigi Palma - All rights reserved.\n          </Typography>\n          <Box sx={{ mt: 1 }}>\n            <Button color=\"primary\" size=\"small\">View Privacy Policy</Button>\n            <Button color=\"primary\" size=\"small\">Terms & Conditions</Button>\n          </Box>\n        </Box>\n\n        {/* Snackbars per feedback */}\n        <Snackbar \n          open={!!error} \n          autoHideDuration={6000} \n          onClose={handleCloseSnackbar}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert onClose={handleCloseSnackbar} severity=\"error\" sx={{ width: '100%' }}>\n            {error}\n          </Alert>\n        </Snackbar>\n\n        <Snackbar \n          open={!!success} \n          autoHideDuration={3000} \n          onClose={handleCloseSnackbar}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert onClose={handleCloseSnackbar} severity=\"success\" sx={{ width: '100%' }}>\n            {success}\n          </Alert>\n        </Snackbar>\n      </Container>\n    </Box>\n  );\n};\n\nexport default TaskDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}