{"ast":null,"code":"var _jsxFileName = \"/Users/marcolp/AI/CURSOR projects/Lose/frontend/src/components/dashboard/TaskDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { Box, Typography, Button, Container, Grid, IconButton, Alert, Snackbar } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport { useBooks } from '../../context/BookContext';\n\n// Import dei componenti TaskCard\nimport CategoryTaskCard from './CategoryTaskCard';\nimport CoverTaskCard from './CoverTaskCard';\nimport BackCoverTaskCard from './BackCoverTaskCard';\nimport PrefaceTaskCard from './PrefaceTaskCard';\nimport StoreDescriptionTaskCard from './StoreDescriptionTaskCard';\nimport KeywordsTaskCard from './KeywordsTaskCard';\n\n/**\n * TaskDashboard - Componente principale per la gestione dei metadati del libro\n * Permette di generare e gestire:\n * - Categorie BISAC\n * - Copertine\n * - Quarta di copertina\n * - Prefazione\n * - Descrizione per gli store\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TaskDashboard = () => {\n  _s();\n  // Hook per la navigazione e l'accesso ai parametri della route\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // Accesso al contesto dei libri e relative funzioni\n  const {\n    books,\n    updateBookMetadata,\n    generateCategories,\n    regenerateCategory,\n    generateScenes,\n    generateCoverImages,\n    generateBackCover,\n    generatePreface,\n    generateStoreDescription,\n    generateKeywords,\n    regenerateKeyword\n  } = useBooks();\n\n  // Stati locali per gestire il libro corrente e le varie sezioni\n  const [currentBook, setCurrentBook] = useState(null);\n  const [expandedCard, setExpandedCard] = useState(null);\n\n  // Stati per controllare la visibilità delle sezioni\n  const [showCategories, setShowCategories] = useState(false);\n  const [showCovers, setShowCovers] = useState(false);\n  const [showBackCover, setShowBackCover] = useState(false);\n  const [showPreface, setShowPreface] = useState(false);\n  const [showStoreDescription, setShowStoreDescription] = useState(false);\n  const [showKeywords, setShowKeywords] = useState(false);\n\n  // Stati per gestire i processi di generazione\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isGeneratingCovers, setIsGeneratingCovers] = useState(false);\n  const [isGeneratingBackCover, setIsGeneratingBackCover] = useState(false);\n  const [isGeneratingPreface, setIsGeneratingPreface] = useState(false);\n  const [isGeneratingStoreDescription, setIsGeneratingStoreDescription] = useState(false);\n  const [isGeneratingCategory, setIsGeneratingCategory] = useState(false);\n  const [isGeneratingKeywords, setIsGeneratingKeywords] = useState(false);\n  const [isRegeneratingKeyword, setIsRegeneratingKeyword] = useState(false);\n\n  // Stati per la gestione degli errori e dei messaggi di successo\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  /**\n   * Effetto per inizializzare il componente con i dati del libro selezionato\n   * e impostare la visibilità delle sezioni in base ai metadati esistenti\n   */\n  useEffect(() => {\n    var _location$state;\n    const bookName = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.bookName;\n    if (bookName) {\n      const book = books.find(b => b.title === bookName);\n      if (book) {\n        var _book$metadata, _book$metadata2, _book$metadata2$cover, _book$metadata2$cover2, _book$metadata3, _book$metadata4, _book$metadata5, _book$metadata6;\n        setCurrentBook(book);\n        setShowCategories(!!((_book$metadata = book.metadata) !== null && _book$metadata !== void 0 && _book$metadata.categories));\n        setShowCovers(!!((_book$metadata2 = book.metadata) !== null && _book$metadata2 !== void 0 && (_book$metadata2$cover = _book$metadata2.covers) !== null && _book$metadata2$cover !== void 0 && (_book$metadata2$cover2 = _book$metadata2$cover.scenes) !== null && _book$metadata2$cover2 !== void 0 && _book$metadata2$cover2.length));\n        setShowBackCover(!!((_book$metadata3 = book.metadata) !== null && _book$metadata3 !== void 0 && _book$metadata3.backCover));\n        setShowPreface(!!((_book$metadata4 = book.metadata) !== null && _book$metadata4 !== void 0 && _book$metadata4.preface));\n        setShowStoreDescription(!!((_book$metadata5 = book.metadata) !== null && _book$metadata5 !== void 0 && _book$metadata5.storeDescription));\n        setShowKeywords(!!((_book$metadata6 = book.metadata) !== null && _book$metadata6 !== void 0 && _book$metadata6.keywords));\n      }\n    }\n  }, [location.state, books]);\n\n  /**\n   * Gestisce l'espansione/collasso delle sezioni\n   * @param {string} cardId - ID della sezione da espandere/collassare\n   */\n  const handleExpand = cardId => {\n    if (expandedCard === cardId) {\n      setExpandedCard(null);\n    } else {\n      setExpandedCard(cardId);\n    }\n  };\n\n  /**\n   * Gestisce la generazione delle categorie BISAC\n   * Aggiorna i metadati del libro con le nuove categorie generate\n   */\n  const handleGenerateCategories = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGenerating(true);\n      const result = await generateCategories(currentBook.id);\n      await updateBookMetadata(currentBook.id, {\n        categories: result\n      });\n      setShowCategories(true);\n      setSuccess('Categorie generate con successo');\n    } catch (error) {\n      setError('Errore nella generazione delle categorie. Riprova.');\n      setShowCategories(false);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  // Stile comune per i pulsanti di generazione\n  const generateButtonStyle = {\n    minWidth: '200px',\n    maxWidth: '300px',\n    height: '48px',\n    borderRadius: '8px',\n    textTransform: 'uppercase',\n    fontSize: '1rem',\n    fontWeight: 500,\n    boxShadow: '0 4px 12px rgba(75, 107, 251, 0.2)',\n    '&:hover': {\n      boxShadow: '0 6px 16px rgba(75, 107, 251, 0.3)',\n      backgroundColor: 'primary.dark'\n    }\n  };\n\n  // Rendering condizionale se non c'è un libro selezionato\n  if (!currentBook) return null;\n  const handleCloseSnackbar = () => {\n    setError(null);\n    setSuccess(null);\n  };\n  const handleGenerateCovers = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingCovers(true);\n      const scenesResponse = await generateScenes(currentBook.id);\n      const covers = await generateCoverImages(currentBook.id, scenesResponse.scenes);\n      await updateBookMetadata(currentBook.id, {\n        covers: {\n          scenes: covers.covers\n        }\n      });\n      setShowCovers(true);\n      setSuccess('Copertine generate con successo');\n    } catch (error) {\n      setError('Errore nella generazione delle copertine. Riprova.');\n      setShowCovers(false);\n    } finally {\n      setIsGeneratingCovers(false);\n    }\n  };\n  const handleGenerateBackCover = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingBackCover(true);\n      const result = await generateBackCover(currentBook.id);\n      await updateBookMetadata(currentBook.id, {\n        backCover: result\n      });\n      setShowBackCover(true);\n      setSuccess('Quarta di copertina generata con successo');\n    } catch (error) {\n      setError('Errore nella generazione della quarta di copertina. Riprova.');\n      setShowBackCover(false);\n    } finally {\n      setIsGeneratingBackCover(false);\n    }\n  };\n  const handleGeneratePreface = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingPreface(true);\n      const result = await generatePreface(currentBook.id);\n      await updateBookMetadata(currentBook.id, {\n        preface: result\n      });\n      setShowPreface(true);\n      setSuccess('Prefazione generata con successo');\n    } catch (error) {\n      setError('Errore nella generazione della prefazione. Riprova.');\n      setShowPreface(false);\n    } finally {\n      setIsGeneratingPreface(false);\n    }\n  };\n  const handleGenerateStoreDescription = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingStoreDescription(true);\n      const result = await generateStoreDescription(currentBook.id);\n      await updateBookMetadata(currentBook.id, {\n        storeDescription: result\n      });\n      setShowStoreDescription(true);\n      setSuccess('Descrizione per gli store generata con successo');\n    } catch (error) {\n      setError('Errore nella generazione della descrizione per gli store. Riprova.');\n      setShowStoreDescription(false);\n    } finally {\n      setIsGeneratingStoreDescription(false);\n    }\n  };\n  const handleRegenerateCategory = async type => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingCategory(true);\n      const result = await regenerateCategory(currentBook.id, type);\n      const updatedCategories = {\n        ...currentBook.metadata.categories,\n        [type === 'main' ? 'mainCategory' : `secondaryCategories[${type.slice(-1) - 1}]`]: result\n      };\n      await updateBookMetadata(currentBook.id, {\n        categories: updatedCategories\n      });\n      setSuccess('Categoria rigenerata con successo');\n    } catch (error) {\n      setError('Errore nella rigenerazione della categoria. Riprova.');\n    } finally {\n      setIsGeneratingCategory(false);\n    }\n  };\n  const handleGenerateKeywords = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingKeywords(true);\n      const result = await generateKeywords(currentBook.id);\n      await updateBookMetadata(currentBook.id, {\n        keywords: result\n      });\n      setShowKeywords(true);\n      setSuccess('Parole chiave generate con successo');\n    } catch (error) {\n      setError('Errore nella generazione delle parole chiave. Riprova.');\n      setShowKeywords(false);\n    } finally {\n      setIsGeneratingKeywords(false);\n    }\n  };\n  const handleRegenerateKeyword = async index => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsRegeneratingKeyword(true);\n      const result = await regenerateKeyword(currentBook.id, index, currentBook.metadata.keywords);\n      await updateBookMetadata(currentBook.id, {\n        keywords: result\n      });\n      setSuccess('Parola chiave rigenerata con successo');\n    } catch (error) {\n      setError('Errore nella rigenerazione della parola chiave. Riprova.');\n    } finally {\n      setIsRegeneratingKeyword(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      backgroundColor: '#F8F9FA',\n      minHeight: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        py: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mb: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => navigate('/'),\n          sx: {\n            mr: 2,\n            color: 'text.secondary',\n            '&:hover': {\n              backgroundColor: 'rgba(0, 0, 0, 0.04)'\n            }\n          },\n          children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            flex: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            color: \"text.secondary\",\n            sx: {\n              mb: 1\n            },\n            children: currentBook.date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            component: \"h1\",\n            sx: {\n              fontWeight: 500,\n              color: 'text.primary'\n            },\n            children: currentBook.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(CategoryTaskCard, {\n            currentBook: currentBook,\n            isExpanded: expandedCard === 'metadata',\n            onExpand: () => handleExpand('metadata'),\n            isGenerating: isGenerating,\n            onGenerate: handleGenerateCategories,\n            showContent: showCategories,\n            isGeneratingCategory: isGeneratingCategory,\n            onRegenerateCategory: handleRegenerateCategory,\n            generateButtonStyle: generateButtonStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(CoverTaskCard, {\n            currentBook: currentBook,\n            isExpanded: expandedCard === 'cover',\n            onExpand: () => handleExpand('cover'),\n            isGenerating: isGeneratingCovers,\n            onGenerate: handleGenerateCovers,\n            showContent: showCovers,\n            navigate: navigate,\n            generateButtonStyle: generateButtonStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(BackCoverTaskCard, {\n            currentBook: currentBook,\n            isExpanded: expandedCard === 'backcover',\n            onExpand: () => handleExpand('backcover'),\n            isGenerating: isGeneratingBackCover,\n            onGenerate: handleGenerateBackCover,\n            showContent: showBackCover,\n            onRegenerate: handleGenerateBackCover,\n            generateButtonStyle: generateButtonStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(PrefaceTaskCard, {\n            currentBook: currentBook,\n            isExpanded: expandedCard === 'preface',\n            onExpand: () => handleExpand('preface'),\n            isGenerating: isGeneratingPreface,\n            onGenerate: handleGeneratePreface,\n            showContent: showPreface,\n            onRegenerate: handleGeneratePreface,\n            generateButtonStyle: generateButtonStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(StoreDescriptionTaskCard, {\n            currentBook: currentBook,\n            isExpanded: expandedCard === 'store',\n            onExpand: () => handleExpand('store'),\n            isGenerating: isGeneratingStoreDescription,\n            onGenerate: handleGenerateStoreDescription,\n            showContent: showStoreDescription,\n            onRegenerate: handleGenerateStoreDescription,\n            generateButtonStyle: generateButtonStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          children: /*#__PURE__*/_jsxDEV(KeywordsTaskCard, {\n            currentBook: currentBook,\n            isExpanded: expandedCard === 'keywords',\n            onExpand: () => handleExpand('keywords'),\n            isGenerating: isGeneratingKeywords,\n            onGenerate: handleGenerateKeywords,\n            showContent: showKeywords,\n            isRegeneratingKeyword: isRegeneratingKeyword,\n            onRegenerateKeyword: handleRegenerateKeyword,\n            generateButtonStyle: generateButtonStyle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 424,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 4,\n          textAlign: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: \"\\xA9 2024 Marco Luigi Palma - All rights reserved.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            size: \"small\",\n            children: \"View Privacy Policy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"primary\",\n            size: \"small\",\n            children: \"Terms & Conditions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: !!error,\n        autoHideDuration: 6000,\n        onClose: handleCloseSnackbar,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: handleCloseSnackbar,\n          severity: \"error\",\n          sx: {\n            width: '100%'\n          },\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: !!success,\n        autoHideDuration: 3000,\n        onClose: handleCloseSnackbar,\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: handleCloseSnackbar,\n          severity: \"success\",\n          sx: {\n            width: '100%'\n          },\n          children: success\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 323,\n    columnNumber: 5\n  }, this);\n};\n_s(TaskDashboard, \"ccuNQicqneCq6Y4x2Tg4z16xgf4=\", false, function () {\n  return [useLocation, useNavigate, useBooks];\n});\n_c = TaskDashboard;\nexport default TaskDashboard;\nvar _c;\n$RefreshReg$(_c, \"TaskDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","Box","Typography","Button","Container","Grid","IconButton","Alert","Snackbar","ArrowBackIcon","useBooks","CategoryTaskCard","CoverTaskCard","BackCoverTaskCard","PrefaceTaskCard","StoreDescriptionTaskCard","KeywordsTaskCard","jsxDEV","_jsxDEV","TaskDashboard","_s","location","navigate","books","updateBookMetadata","generateCategories","regenerateCategory","generateScenes","generateCoverImages","generateBackCover","generatePreface","generateStoreDescription","generateKeywords","regenerateKeyword","currentBook","setCurrentBook","expandedCard","setExpandedCard","showCategories","setShowCategories","showCovers","setShowCovers","showBackCover","setShowBackCover","showPreface","setShowPreface","showStoreDescription","setShowStoreDescription","showKeywords","setShowKeywords","isGenerating","setIsGenerating","isGeneratingCovers","setIsGeneratingCovers","isGeneratingBackCover","setIsGeneratingBackCover","isGeneratingPreface","setIsGeneratingPreface","isGeneratingStoreDescription","setIsGeneratingStoreDescription","isGeneratingCategory","setIsGeneratingCategory","isGeneratingKeywords","setIsGeneratingKeywords","isRegeneratingKeyword","setIsRegeneratingKeyword","error","setError","success","setSuccess","_location$state","bookName","state","book","find","b","title","_book$metadata","_book$metadata2","_book$metadata2$cover","_book$metadata2$cover2","_book$metadata3","_book$metadata4","_book$metadata5","_book$metadata6","metadata","categories","covers","scenes","length","backCover","preface","storeDescription","keywords","handleExpand","cardId","handleGenerateCategories","result","id","generateButtonStyle","minWidth","maxWidth","height","borderRadius","textTransform","fontSize","fontWeight","boxShadow","backgroundColor","handleCloseSnackbar","handleGenerateCovers","scenesResponse","handleGenerateBackCover","handleGeneratePreface","handleGenerateStoreDescription","handleRegenerateCategory","type","updatedCategories","slice","handleGenerateKeywords","handleRegenerateKeyword","index","sx","minHeight","children","py","display","alignItems","mb","onClick","mr","color","fileName","_jsxFileName","lineNumber","columnNumber","flex","variant","date","component","container","spacing","item","xs","isExpanded","onExpand","onGenerate","showContent","onRegenerateCategory","onRegenerate","onRegenerateKeyword","mt","textAlign","size","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","width","_c","$RefreshReg$"],"sources":["/Users/marcolp/AI/CURSOR projects/Lose/frontend/src/components/dashboard/TaskDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Typography,\n  Button,\n  Container,\n  Grid,\n  IconButton,\n  Alert,\n  Snackbar\n} from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport { useBooks } from '../../context/BookContext';\n\n// Import dei componenti TaskCard\nimport CategoryTaskCard from './CategoryTaskCard';\nimport CoverTaskCard from './CoverTaskCard';\nimport BackCoverTaskCard from './BackCoverTaskCard';\nimport PrefaceTaskCard from './PrefaceTaskCard';\nimport StoreDescriptionTaskCard from './StoreDescriptionTaskCard';\nimport KeywordsTaskCard from './KeywordsTaskCard';\n\n/**\n * TaskDashboard - Componente principale per la gestione dei metadati del libro\n * Permette di generare e gestire:\n * - Categorie BISAC\n * - Copertine\n * - Quarta di copertina\n * - Prefazione\n * - Descrizione per gli store\n */\nconst TaskDashboard = () => {\n  // Hook per la navigazione e l'accesso ai parametri della route\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  // Accesso al contesto dei libri e relative funzioni\n  const { \n    books, \n    updateBookMetadata, \n    generateCategories, \n    regenerateCategory, \n    generateScenes, \n    generateCoverImages, \n    generateBackCover, \n    generatePreface, \n    generateStoreDescription, \n    generateKeywords, \n    regenerateKeyword \n  } = useBooks();\n\n  // Stati locali per gestire il libro corrente e le varie sezioni\n  const [currentBook, setCurrentBook] = useState(null);\n  const [expandedCard, setExpandedCard] = useState(null);\n  \n  // Stati per controllare la visibilità delle sezioni\n  const [showCategories, setShowCategories] = useState(false);\n  const [showCovers, setShowCovers] = useState(false);\n  const [showBackCover, setShowBackCover] = useState(false);\n  const [showPreface, setShowPreface] = useState(false);\n  const [showStoreDescription, setShowStoreDescription] = useState(false);\n  const [showKeywords, setShowKeywords] = useState(false);\n\n  // Stati per gestire i processi di generazione\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [isGeneratingCovers, setIsGeneratingCovers] = useState(false);\n  const [isGeneratingBackCover, setIsGeneratingBackCover] = useState(false);\n  const [isGeneratingPreface, setIsGeneratingPreface] = useState(false);\n  const [isGeneratingStoreDescription, setIsGeneratingStoreDescription] = useState(false);\n  const [isGeneratingCategory, setIsGeneratingCategory] = useState(false);\n  const [isGeneratingKeywords, setIsGeneratingKeywords] = useState(false);\n  const [isRegeneratingKeyword, setIsRegeneratingKeyword] = useState(false);\n\n  // Stati per la gestione degli errori e dei messaggi di successo\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  /**\n   * Effetto per inizializzare il componente con i dati del libro selezionato\n   * e impostare la visibilità delle sezioni in base ai metadati esistenti\n   */\n  useEffect(() => {\n    const bookName = location.state?.bookName;\n    if (bookName) {\n      const book = books.find(b => b.title === bookName);\n      if (book) {\n        setCurrentBook(book);\n        setShowCategories(!!book.metadata?.categories);\n        setShowCovers(!!book.metadata?.covers?.scenes?.length);\n        setShowBackCover(!!book.metadata?.backCover);\n        setShowPreface(!!book.metadata?.preface);\n        setShowStoreDescription(!!book.metadata?.storeDescription);\n        setShowKeywords(!!book.metadata?.keywords);\n      }\n    }\n  }, [location.state, books]);\n\n  /**\n   * Gestisce l'espansione/collasso delle sezioni\n   * @param {string} cardId - ID della sezione da espandere/collassare\n   */\n  const handleExpand = (cardId) => {\n    if (expandedCard === cardId) {\n      setExpandedCard(null);\n    } else {\n      setExpandedCard(cardId);\n    }\n  };\n\n  /**\n   * Gestisce la generazione delle categorie BISAC\n   * Aggiorna i metadati del libro con le nuove categorie generate\n   */\n  const handleGenerateCategories = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGenerating(true);\n      \n      const result = await generateCategories(currentBook.id);\n      await updateBookMetadata(currentBook.id, {\n        categories: result\n      });\n      \n      setShowCategories(true);\n      setSuccess('Categorie generate con successo');\n    } catch (error) {\n      setError('Errore nella generazione delle categorie. Riprova.');\n      setShowCategories(false);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  // Stile comune per i pulsanti di generazione\n  const generateButtonStyle = {\n    minWidth: '200px',\n    maxWidth: '300px',\n    height: '48px',\n    borderRadius: '8px',\n    textTransform: 'uppercase',\n    fontSize: '1rem',\n    fontWeight: 500,\n    boxShadow: '0 4px 12px rgba(75, 107, 251, 0.2)',\n    '&:hover': {\n      boxShadow: '0 6px 16px rgba(75, 107, 251, 0.3)',\n      backgroundColor: 'primary.dark'\n    }\n  };\n\n  // Rendering condizionale se non c'è un libro selezionato\n  if (!currentBook) return null;\n\n  const handleCloseSnackbar = () => {\n    setError(null);\n    setSuccess(null);\n  };\n\n  const handleGenerateCovers = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingCovers(true);\n      \n      const scenesResponse = await generateScenes(currentBook.id);\n      const covers = await generateCoverImages(currentBook.id, scenesResponse.scenes);\n      \n      await updateBookMetadata(currentBook.id, {\n        covers: { \n          scenes: covers.covers\n        }\n      });\n      \n      setShowCovers(true);\n      setSuccess('Copertine generate con successo');\n    } catch (error) {\n      setError('Errore nella generazione delle copertine. Riprova.');\n      setShowCovers(false);\n    } finally {\n      setIsGeneratingCovers(false);\n    }\n  };\n\n  const handleGenerateBackCover = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingBackCover(true);\n      \n      const result = await generateBackCover(currentBook.id);\n      \n      await updateBookMetadata(currentBook.id, {\n        backCover: result\n      });\n      \n      setShowBackCover(true);\n      setSuccess('Quarta di copertina generata con successo');\n    } catch (error) {\n      setError('Errore nella generazione della quarta di copertina. Riprova.');\n      setShowBackCover(false);\n    } finally {\n      setIsGeneratingBackCover(false);\n    }\n  };\n\n  const handleGeneratePreface = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingPreface(true);\n      \n      const result = await generatePreface(currentBook.id);\n      \n      await updateBookMetadata(currentBook.id, {\n        preface: result\n      });\n      \n      setShowPreface(true);\n      setSuccess('Prefazione generata con successo');\n    } catch (error) {\n      setError('Errore nella generazione della prefazione. Riprova.');\n      setShowPreface(false);\n    } finally {\n      setIsGeneratingPreface(false);\n    }\n  };\n\n  const handleGenerateStoreDescription = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingStoreDescription(true);\n      \n      const result = await generateStoreDescription(currentBook.id);\n      \n      await updateBookMetadata(currentBook.id, {\n        storeDescription: result\n      });\n      \n      setShowStoreDescription(true);\n      setSuccess('Descrizione per gli store generata con successo');\n    } catch (error) {\n      setError('Errore nella generazione della descrizione per gli store. Riprova.');\n      setShowStoreDescription(false);\n    } finally {\n      setIsGeneratingStoreDescription(false);\n    }\n  };\n\n  const handleRegenerateCategory = async (type) => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingCategory(true);\n      \n      const result = await regenerateCategory(currentBook.id, type);\n      \n      const updatedCategories = {\n        ...currentBook.metadata.categories,\n        [type === 'main' ? 'mainCategory' : `secondaryCategories[${type.slice(-1) - 1}]`]: result\n      };\n      \n      await updateBookMetadata(currentBook.id, {\n        categories: updatedCategories\n      });\n      \n      setSuccess('Categoria rigenerata con successo');\n    } catch (error) {\n      setError('Errore nella rigenerazione della categoria. Riprova.');\n    } finally {\n      setIsGeneratingCategory(false);\n    }\n  };\n\n  const handleGenerateKeywords = async () => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsGeneratingKeywords(true);\n      \n      const result = await generateKeywords(currentBook.id);\n      \n      await updateBookMetadata(currentBook.id, {\n        keywords: result\n      });\n      \n      setShowKeywords(true);\n      setSuccess('Parole chiave generate con successo');\n    } catch (error) {\n      setError('Errore nella generazione delle parole chiave. Riprova.');\n      setShowKeywords(false);\n    } finally {\n      setIsGeneratingKeywords(false);\n    }\n  };\n\n  const handleRegenerateKeyword = async (index) => {\n    try {\n      setError(null);\n      setSuccess(null);\n      setIsRegeneratingKeyword(true);\n      \n      const result = await regenerateKeyword(\n        currentBook.id, \n        index,\n        currentBook.metadata.keywords\n      );\n      \n      await updateBookMetadata(currentBook.id, {\n        keywords: result\n      });\n      \n      setSuccess('Parola chiave rigenerata con successo');\n    } catch (error) {\n      setError('Errore nella rigenerazione della parola chiave. Riprova.');\n    } finally {\n      setIsRegeneratingKeyword(false);\n    }\n  };\n\n  return (\n    <Box sx={{ backgroundColor: '#F8F9FA', minHeight: '100vh' }}>\n      <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n        {/* Header */}\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 4 }}>\n          <IconButton \n            onClick={() => navigate('/')}\n            sx={{ \n              mr: 2,\n              color: 'text.secondary',\n              '&:hover': {\n                backgroundColor: 'rgba(0, 0, 0, 0.04)'\n              }\n            }}\n          >\n            <ArrowBackIcon />\n          </IconButton>\n          <Box sx={{ flex: 1 }}>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\" sx={{ mb: 1 }}>\n              {currentBook.date}\n            </Typography>\n            <Typography variant=\"h5\" component=\"h1\" sx={{ fontWeight: 500, color: 'text.primary' }}>\n              {currentBook.title}\n            </Typography>\n          </Box>\n        </Box>\n\n        {/* Task Cards */}\n        <Grid container spacing={3}>\n          {/* Categorie */}\n          <Grid item xs={12}>\n            <CategoryTaskCard\n              currentBook={currentBook}\n              isExpanded={expandedCard === 'metadata'}\n              onExpand={() => handleExpand('metadata')}\n              isGenerating={isGenerating}\n              onGenerate={handleGenerateCategories}\n              showContent={showCategories}\n              isGeneratingCategory={isGeneratingCategory}\n              onRegenerateCategory={handleRegenerateCategory}\n              generateButtonStyle={generateButtonStyle}\n            />\n          </Grid>\n\n          {/* Copertine */}\n          <Grid item xs={12}>\n            <CoverTaskCard\n              currentBook={currentBook}\n              isExpanded={expandedCard === 'cover'}\n              onExpand={() => handleExpand('cover')}\n              isGenerating={isGeneratingCovers}\n              onGenerate={handleGenerateCovers}\n              showContent={showCovers}\n              navigate={navigate}\n              generateButtonStyle={generateButtonStyle}\n            />\n          </Grid>\n\n          {/* Quarta di copertina */}\n          <Grid item xs={12}>\n            <BackCoverTaskCard\n              currentBook={currentBook}\n              isExpanded={expandedCard === 'backcover'}\n              onExpand={() => handleExpand('backcover')}\n              isGenerating={isGeneratingBackCover}\n              onGenerate={handleGenerateBackCover}\n              showContent={showBackCover}\n              onRegenerate={handleGenerateBackCover}\n              generateButtonStyle={generateButtonStyle}\n            />\n          </Grid>\n\n          {/* Prefazione */}\n          <Grid item xs={12}>\n            <PrefaceTaskCard\n              currentBook={currentBook}\n              isExpanded={expandedCard === 'preface'}\n              onExpand={() => handleExpand('preface')}\n              isGenerating={isGeneratingPreface}\n              onGenerate={handleGeneratePreface}\n              showContent={showPreface}\n              onRegenerate={handleGeneratePreface}\n              generateButtonStyle={generateButtonStyle}\n            />\n          </Grid>\n\n          {/* Descrizione Store */}\n          <Grid item xs={12}>\n            <StoreDescriptionTaskCard\n              currentBook={currentBook}\n              isExpanded={expandedCard === 'store'}\n              onExpand={() => handleExpand('store')}\n              isGenerating={isGeneratingStoreDescription}\n              onGenerate={handleGenerateStoreDescription}\n              showContent={showStoreDescription}\n              onRegenerate={handleGenerateStoreDescription}\n              generateButtonStyle={generateButtonStyle}\n            />\n          </Grid>\n\n          {/* Keywords Card */}\n          <Grid item xs={12}>\n            <KeywordsTaskCard\n              currentBook={currentBook}\n              isExpanded={expandedCard === 'keywords'}\n              onExpand={() => handleExpand('keywords')}\n              isGenerating={isGeneratingKeywords}\n              onGenerate={handleGenerateKeywords}\n              showContent={showKeywords}\n              isRegeneratingKeyword={isRegeneratingKeyword}\n              onRegenerateKeyword={handleRegenerateKeyword}\n              generateButtonStyle={generateButtonStyle}\n            />\n          </Grid>\n        </Grid>\n\n        {/* Footer */}\n        <Box sx={{ mt: 4, textAlign: 'center' }}>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            © 2024 Marco Luigi Palma - All rights reserved.\n          </Typography>\n          <Box sx={{ mt: 1 }}>\n            <Button color=\"primary\" size=\"small\">View Privacy Policy</Button>\n            <Button color=\"primary\" size=\"small\">Terms & Conditions</Button>\n          </Box>\n        </Box>\n\n        {/* Snackbars */}\n        <Snackbar \n          open={!!error} \n          autoHideDuration={6000} \n          onClose={handleCloseSnackbar}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert onClose={handleCloseSnackbar} severity=\"error\" sx={{ width: '100%' }}>\n            {error}\n          </Alert>\n        </Snackbar>\n\n        <Snackbar \n          open={!!success} \n          autoHideDuration={3000} \n          onClose={handleCloseSnackbar}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n        >\n          <Alert onClose={handleCloseSnackbar} severity=\"success\" sx={{ width: '100%' }}>\n            {success}\n          </Alert>\n        </Snackbar>\n      </Container>\n    </Box>\n  );\n};\n\nexport default TaskDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}